{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js??ref--14-0!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/feedback-list.js","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/feedback-list.js","mtime":1673491775271},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js","mtime":1673491969842}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2pkcy9Eb2N1bWVudHMvZGlza29taW5mby9qZHMvZGlnaXRlYW0vZ3JvdXB3YXJlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2pkcy9Eb2N1bWVudHMvZGlza29taW5mby9qZHMvZGlnaXRlYW0vZ3JvdXB3YXJlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvamRzL0RvY3VtZW50cy9kaXNrb21pbmZvL2pkcy9kaWdpdGVhbS9ncm91cHdhcmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCnZhciBfbXV0YXRpb25zOwoKaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vbXV0YXRpb24tdHlwZXMnOwppbXBvcnQgeyBkYiwgRmllbGRWYWx1ZSB9IGZyb20gJ0AvbGliL2ZpcmViYXNlJzsgLy8gc3RhdGUKCmV4cG9ydCB2YXIgc3RhdGUgPSB7CiAgbG9hZGluZzogdHJ1ZSwKICBpdGVtczogW10KfTsgLy8gZ2V0dGVycwoKZXhwb3J0IHZhciBnZXR0ZXJzID0gewogIGxvYWRpbmc6IGZ1bmN0aW9uIGxvYWRpbmcoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5sb2FkaW5nOwogIH0sCiAgaXRlbXM6IGZ1bmN0aW9uIGl0ZW1zKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuaXRlbXM7CiAgfQp9OyAvLyBtdXRhdGlvbnMKCmV4cG9ydCB2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIHR5cGVzLkZFRURCQUNLX0xJU1RfSU5JVCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUubG9hZGluZyA9IHRydWU7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgdHlwZXMuRkVFREJBQ0tfTElTVF9MT0FERUQsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZikgewogIHZhciBpdGVtcyA9IF9yZWYuaXRlbXM7CiAgc3RhdGUuaXRlbXMgPSBpdGVtczsKICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7Cn0pLCBfbXV0YXRpb25zKTsgLy8gYWN0aW9ucwoKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIGZldGNoSXRlbXM6IGZ1bmN0aW9uIGZldGNoSXRlbXMoX3JlZjIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIHF1ZXJ5U25hcHNob3QsIGRvY3VtZW50czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZGIuY29sbGVjdGlvbignZmVhdHVyZXNfcmVxdWVzdHMnKS5vcmRlckJ5KCd2b3Rlc19jb3VudCcsICdkZXNjJykubGltaXQoNTApLmdldCgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGRvY3VtZW50cyA9IHF1ZXJ5U25hcHNob3QuZG9jcy5tYXAoZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBpZDogZG9jLmlkCiAgICAgICAgICAgICAgICB9LCBkb2MuZGF0YSgpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb21taXQodHlwZXMuRkVFREJBQ0tfTElTVF9MT0FERUQsIHsKICAgICAgICAgICAgICAgIGl0ZW1zOiBkb2N1bWVudHMKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIHZvdGU6IGZ1bmN0aW9uIHZvdGUoX3JlZjMsIF9yZWY0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIGlkLCBxdWVyeVNuYXBzaG90OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgICAgICAgICAgICBpZCA9IF9yZWY0LmlkOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gZGIuY29sbGVjdGlvbignZmVhdHVyZXNfcmVxdWVzdHMnKS5kb2MoaWQpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U25hcHNob3QudXBkYXRlKHsKICAgICAgICAgICAgICAgIHZvdGVzX2NvdW50OiBGaWVsZFZhbHVlLmluY3JlbWVudCgxKQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGRpc3BhdGNoKCdmZXRjaEl0ZW1zJyk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9Cn07"},{"version":3,"sources":["/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/feedback-list.js"],"names":["types","db","FieldValue","state","loading","items","getters","mutations","FEEDBACK_LIST_INIT","FEEDBACK_LIST_LOADED","actions","fetchItems","commit","collection","orderBy","limit","get","querySnapshot","documents","docs","map","doc","id","data","vote","dispatch","update","votes_count","increment"],"mappings":";;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,mBAAvB;AACA,SAASC,EAAT,EAAaC,UAAb,QAA+B,gBAA/B,C,CAEA;;AACA,OAAO,IAAMC,KAAK,GAAG;AACnBC,EAAAA,OAAO,EAAE,IADU;AAEnBC,EAAAA,KAAK,EAAE;AAFY,CAAd,C,CAKP;;AACA,OAAO,IAAMC,OAAO,GAAG;AACrBF,EAAAA,OAAO,EAAE,iBAAAD,KAAK;AAAA,WAAIA,KAAK,CAACC,OAAV;AAAA,GADO;AAErBC,EAAAA,KAAK,EAAE,eAAAF,KAAK;AAAA,WAAIA,KAAK,CAACE,KAAV;AAAA;AAFS,CAAhB,C,CAKP;;AACA,OAAO,IAAME,SAAS,iDACnBP,KAAK,CAACQ,kBADa,YACQL,KADR,EACe;AACjCA,EAAAA,KAAK,CAACC,OAAN,GAAgB,IAAhB;AACD,CAHmB,+BAKnBJ,KAAK,CAACS,oBALa,YAKUN,KALV,QAK4B;AAAA,MAATE,KAAS,QAATA,KAAS;AAC9CF,EAAAA,KAAK,CAACE,KAAN,GAAcA,KAAd;AACAF,EAAAA,KAAK,CAACC,OAAN,GAAgB,KAAhB;AACD,CARmB,cAAf,C,CAWP;;AACA,OAAO,IAAMM,OAAO,GAAG;AACfC,EAAAA,UADe,6BACS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAVC,cAAAA,MAAU,SAAVA,MAAU;AAAA;AAAA,qBACAX,EAAE,CAACY,UAAH,CAAc,mBAAd,EACzBC,OADyB,CACjB,aADiB,EACF,MADE,EAEzBC,KAFyB,CAEnB,EAFmB,EAGzBC,GAHyB,EADA;;AAAA;AACtBC,cAAAA,aADsB;AAMtBC,cAAAA,SANsB,GAMVD,aAAa,CAACE,IAAd,CAAmBC,GAAnB,CAAuB,UAAAC,GAAG;AAAA;AAC1CC,kBAAAA,EAAE,EAAED,GAAG,CAACC;AADkC,mBAEvCD,GAAG,CAACE,IAAJ,EAFuC;AAAA,eAA1B,CANU;AAW5BX,cAAAA,MAAM,CAACZ,KAAK,CAACS,oBAAP,EAA6B;AAAEJ,gBAAAA,KAAK,EAAEa;AAAT,eAA7B,CAAN;;AAX4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAY7B,GAboB;AAefM,EAAAA,IAfe,8BAeqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA5BZ,cAAAA,MAA4B,SAA5BA,MAA4B,EAApBa,QAAoB,SAApBA,QAAoB;AAANH,cAAAA,EAAM,SAANA,EAAM;AAAA;AAAA,qBACZrB,EAAE,CAACY,UAAH,CAAc,mBAAd,EAAmCQ,GAAnC,CAAuCC,EAAvC,CADY;;AAAA;AAClCL,cAAAA,aADkC;AAAA;AAAA,qBAGlCA,aAAa,CAACS,MAAd,CAAqB;AAAEC,gBAAAA,WAAW,EAAEzB,UAAU,CAAC0B,SAAX,CAAqB,CAArB;AAAf,eAArB,CAHkC;;AAAA;AAKxCH,cAAAA,QAAQ,CAAC,YAAD,CAAR;;AALwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMzC;AArBoB,CAAhB","sourcesContent":["import * as types from '../mutation-types'\nimport { db, FieldValue } from '@/lib/firebase'\n\n// state\nexport const state = {\n  loading: true,\n  items: []\n}\n\n// getters\nexport const getters = {\n  loading: state => state.loading,\n  items: state => state.items\n}\n\n// mutations\nexport const mutations = {\n  [types.FEEDBACK_LIST_INIT] (state) {\n    state.loading = true\n  },\n\n  [types.FEEDBACK_LIST_LOADED] (state, { items }) {\n    state.items = items\n    state.loading = false\n  }\n}\n\n// actions\nexport const actions = {\n  async fetchItems ({ commit }) {\n    const querySnapshot = await db.collection('features_requests')\n      .orderBy('votes_count', 'desc')\n      .limit(50)\n      .get()\n\n    const documents = querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }))\n\n    commit(types.FEEDBACK_LIST_LOADED, { items: documents })\n  },\n\n  async vote ({ commit, dispatch }, { id }) {\n    const querySnapshot = await db.collection('features_requests').doc(id)\n\n    await querySnapshot.update({ votes_count: FieldValue.increment(1) })\n\n    dispatch('fetchItems')\n  }\n}\n"]}]}