{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js??ref--14-0!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/fcm.js","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/fcm.js","mtime":1673491775271},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js","mtime":1673491969842}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgR3JvdXB3YXJlQVBJIH0gZnJvbSAnLi4vLi4vbGliL2F4aW9zJzsKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIGdldERldmljZVRva2VuQnlVc2VySWQ6IGZ1bmN0aW9uIGdldERldmljZVRva2VuQnlVc2VySWQoXywgX3JlZikgewogICAgdmFyIHVzZXJJZCA9IF9yZWYudXNlcklkOwogICAgcmV0dXJuIEdyb3Vwd2FyZUFQSS5nZXQoIm5vdGlmaWNhdGlvbi9kZXZpY2UtdG9rZW4vIi5jb25jYXQodXNlcklkKSkudGhlbihmdW5jdGlvbiAocikgewogICAgICByZXR1cm4gci5kYXRhIHx8IHt9OwogICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIGRldmljZVRva2VuID0gX3JlZjIuZGV2aWNlVG9rZW47CiAgICAgIHJldHVybiBkZXZpY2VUb2tlbiB8fCBudWxsOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9KTsKICB9LAogIGNyZWF0ZVJlZ2lzdHJhdGlvblRva2VuOiBmdW5jdGlvbiBjcmVhdGVSZWdpc3RyYXRpb25Ub2tlbihfcmVmMykgewogICAgdmFyIHJvb3RTdGF0ZSA9IF9yZWYzLnJvb3RTdGF0ZTsKCiAgICB2YXIgX3JlZjQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9LAogICAgICAgIHRva2VuID0gX3JlZjQudG9rZW47CgogICAgcmV0dXJuIEdyb3Vwd2FyZUFQSS5wb3N0KCdub3RpZmljYXRpb24vZGV2aWNlLXRva2VuLycsIHsKICAgICAgYXBwX2lkOiBwcm9jZXNzLmVudi5WVUVfQVBQX0ZJUkVCQVNFX0FQUF9JRCwKICAgICAgZGV2aWNlX3Rva2VuOiB0b2tlbgogICAgfSk7CiAgfSwKICB1cGRhdGVSZWdpc3RyYXRpb25Ub2tlbjogZnVuY3Rpb24gdXBkYXRlUmVnaXN0cmF0aW9uVG9rZW4oX3JlZjUpIHsKICAgIHZhciByb290U3RhdGUgPSBfcmVmNS5yb290U3RhdGU7CgogICAgdmFyIF9yZWY2ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSwKICAgICAgICB0b2tlbiA9IF9yZWY2LnRva2VuOwoKICAgIHZhciB1c2VySWQgPSByb290U3RhdGUuYXV0aC51c2VyLmlkOwogICAgcmV0dXJuIEdyb3Vwd2FyZUFQSS5wdXQoIm5vdGlmaWNhdGlvbi9kZXZpY2UtdG9rZW4vIi5jb25jYXQodXNlcklkKSwgewogICAgICBhcHBfaWQ6IHByb2Nlc3MuZW52LlZVRV9BUFBfRklSRUJBU0VfQVBQX0lELAogICAgICBkZXZpY2VfdG9rZW46IHRva2VuCiAgICB9KTsKICB9LAogIGRlbGV0ZVJlZ2lzdHJhdGlvblRva2VuOiBmdW5jdGlvbiBkZWxldGVSZWdpc3RyYXRpb25Ub2tlbihfcmVmNykgewogICAgdmFyIHJvb3RTdGF0ZSA9IF9yZWY3LnJvb3RTdGF0ZTsKICAgIHZhciB1c2VySWQgPSByb290U3RhdGUuYXV0aC51c2VyLmlkOwogICAgcmV0dXJuIEdyb3Vwd2FyZUFQSS5kZWxldGUoIm5vdGlmaWNhdGlvbi9kZXZpY2UtdG9rZW4vIi5jb25jYXQodXNlcklkKSk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/fcm.js"],"names":["GroupwareAPI","actions","getDeviceTokenByUserId","_","userId","get","then","r","data","deviceToken","catch","e","createRegistrationToken","rootState","token","post","app_id","process","env","VUE_APP_FIREBASE_APP_ID","device_token","updateRegistrationToken","auth","user","id","put","deleteRegistrationToken","delete"],"mappings":"AAAA,SAASA,YAAT,QAA6B,iBAA7B;AAEA,OAAO,IAAMC,OAAO,GAAG;AACrBC,EAAAA,sBADqB,kCACGC,CADH,QACkB;AAAA,QAAVC,MAAU,QAAVA,MAAU;AACrC,WAAOJ,YAAY,CAACK,GAAb,qCAA8CD,MAA9C,GACJE,IADI,CACC,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,IAAF,IAAU,EAAjB;AAAA,KADD,EAEJF,IAFI,CAEC;AAAA,UAAGG,WAAH,SAAGA,WAAH;AAAA,aAAqBA,WAAW,IAAI,IAApC;AAAA,KAFD,EAGJC,KAHI,CAGE,UAACC,CAAD;AAAA,aAAO,IAAP;AAAA,KAHF,CAAP;AAID,GANoB;AAOrBC,EAAAA,uBAPqB,0CAOmC;AAAA,QAA7BC,SAA6B,SAA7BA,SAA6B;;AAAA,oFAAJ,EAAI;AAAA,QAAdC,KAAc,SAAdA,KAAc;;AACtD,WAAOd,YAAY,CAACe,IAAb,CAAkB,4BAAlB,EAAgD;AACrDC,MAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,uBADiC;AAErDC,MAAAA,YAAY,EAAEN;AAFuC,KAAhD,CAAP;AAID,GAZoB;AAarBO,EAAAA,uBAbqB,0CAamC;AAAA,QAA7BR,SAA6B,SAA7BA,SAA6B;;AAAA,oFAAJ,EAAI;AAAA,QAAdC,KAAc,SAAdA,KAAc;;AACtD,QAAMV,MAAM,GAAGS,SAAS,CAACS,IAAV,CAAeC,IAAf,CAAoBC,EAAnC;AACA,WAAOxB,YAAY,CAACyB,GAAb,qCAA8CrB,MAA9C,GAAwD;AAC7DY,MAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,uBADyC;AAE7DC,MAAAA,YAAY,EAAEN;AAF+C,KAAxD,CAAP;AAID,GAnBoB;AAoBrBY,EAAAA,uBApBqB,0CAoBmB;AAAA,QAAbb,SAAa,SAAbA,SAAa;AACtC,QAAMT,MAAM,GAAGS,SAAS,CAACS,IAAV,CAAeC,IAAf,CAAoBC,EAAnC;AACA,WAAOxB,YAAY,CAAC2B,MAAb,qCAAiDvB,MAAjD,EAAP;AACD;AAvBoB,CAAhB","sourcesContent":["import { GroupwareAPI } from '../../lib/axios'\n\nexport const actions = {\n  getDeviceTokenByUserId (_, { userId }) {\n    return GroupwareAPI.get(`notification/device-token/${userId}`)\n      .then((r) => r.data || {})\n      .then(({ deviceToken }) => deviceToken || null)\n      .catch((e) => null)\n  },\n  createRegistrationToken ({ rootState }, { token } = {}) {\n    return GroupwareAPI.post('notification/device-token/', {\n      app_id: process.env.VUE_APP_FIREBASE_APP_ID,\n      device_token: token\n    })\n  },\n  updateRegistrationToken ({ rootState }, { token } = {}) {\n    const userId = rootState.auth.user.id\n    return GroupwareAPI.put(`notification/device-token/${userId}`, {\n      app_id: process.env.VUE_APP_FIREBASE_APP_ID,\n      device_token: token\n    })\n  },\n  deleteRegistrationToken ({ rootState }) {\n    const userId = rootState.auth.user.id\n    return GroupwareAPI.delete(`notification/device-token/${userId}`)\n  }\n}\n"]}]}