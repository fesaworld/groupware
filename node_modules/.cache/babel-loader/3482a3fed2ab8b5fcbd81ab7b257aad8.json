{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/babel-loader/lib/index.js!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Form/DocumentFileInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Form/DocumentFileInput.vue","mtime":1673491775262},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGgiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvamRzL0RvY3VtZW50cy9kaXNrb21pbmZvL2pkcy9kaWdpdGVhbS9ncm91cHdhcmUvZ3JvdXB3YXJlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2pkcy9Eb2N1bWVudHMvZGlza29taW5mby9qZHMvZGlnaXRlYW0vZ3JvdXB3YXJlL2dyb3Vwd2FyZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInOwppbXBvcnQgeyBwcm9wcywgY29tcG9uZW50cyB9IGZyb20gJy4vaW5wdXQtbWl4aW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjb21wb25lbnRzKSwge30sIHsKICAgIEZpbGVTZWxlY3RvcjogZnVuY3Rpb24gRmlsZVNlbGVjdG9yKCkgewogICAgICByZXR1cm4gaW1wb3J0KCcuL0ZpbGVTZWxlY3RvcicpOwogICAgfQogIH0pLAogIG1vZGVsOiB7CiAgICBwcm9wOiAndmFsdWUnLAogICAgZXZlbnQ6ICdpbnB1dCcKICB9LAogIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwge30sIHsKICAgIHBhdGg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgdXJsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0pLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtRmlsZTogbnVsbCwKICAgICAgbVVybDogbnVsbAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0ZpbGVGcm9tU3RvcmFnZTogZnVuY3Rpb24gaXNGaWxlRnJvbVN0b3JhZ2UoKSB7CiAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5mdWxsUGF0aCA9PT0gJ3N0cmluZycgJiYgdGhpcy5mdWxsUGF0aC5zdGFydHNXaXRoKCdodHRwJyk7CiAgICB9LAogICAgaXNTZWxlY3RlZEZpbGVDaGFuZ2VkOiBmdW5jdGlvbiBpc1NlbGVjdGVkRmlsZUNoYW5nZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLm1VcmwgJiYgdGhpcy5tVXJsICE9PSB0aGlzLnVybDsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB1cmw6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHYpIHsKICAgICAgICB0aGlzLm1VcmwgPSB2OwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREb2N1bWVudFRhc2tGaWxlOiBmdW5jdGlvbiBnZXREb2N1bWVudFRhc2tGaWxlKHBhdGgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2dib29rLWRvY3VtZW50cy9nZXREb2N1bWVudCcsIHsKICAgICAgICBwYXRoOiBwYXRoCiAgICAgIH0pOwogICAgfSwKICAgIG9uU2VsZWN0ZWRGaWxlQ2hhbmdlOiBmdW5jdGlvbiBvblNlbGVjdGVkRmlsZUNoYW5nZSh1cmwsIGZpbGUpIHsKICAgICAgdGhpcy5tVXJsID0gdXJsOwogICAgICB0aGlzLm1GaWxlID0gZmlsZTsKICAgIH0sCiAgICBvblNhdmVEb2N1bWVudDogZnVuY3Rpb24gb25TYXZlRG9jdW1lbnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBmaWxlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzLm1GaWxlIGluc3RhbmNlb2YgRmlsZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNhdmVBcyhfdGhpcy5tRmlsZSwgIiIuY29uY2F0KF90aGlzLm1GaWxlLm5hbWUpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgX3RoaXMudXJsID09PSAnc3RyaW5nJyAmJiBfdGhpcy51cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLiRzd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICB0aXRsZTogJ01lbmdhbWJpbCBkYXRhLi4uJywKICAgICAgICAgICAgICAgICAgb25CZWZvcmVPcGVuOiBmdW5jdGlvbiBvbkJlZm9yZU9wZW4oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzd2FsLnNob3dMb2FkaW5nKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRwcm9taXNlTWluRGVsYXkoX3RoaXMuZ2V0RG9jdW1lbnRUYXNrRmlsZShfdGhpcy5wYXRoKSwgMTAwMCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGZpbGUgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIF90aGlzLiRzd2FsLmNsb3NlKCk7CgogICAgICAgICAgICAgICAgc2F2ZUFzKGZpbGUsIGZpbGUubmFtZSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgX3RoaXMuJHN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgIHRleHQ6ICdUZXJqYWRpIGtlc2FsYWhhbiBkYWxhbSBwZW1iYWNhYW4gZG9rdW1lbicsCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnVHV0dXAnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTRdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFNlbGVjdGVkRmlsZTogZnVuY3Rpb24gZ2V0U2VsZWN0ZWRGaWxlKCkgewogICAgICByZXR1cm4gdGhpcy5pc1NlbGVjdGVkRmlsZUNoYW5nZWQgPyB0aGlzLm1GaWxlIDogbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["DocumentFileInput.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <FormInputHeader\n      :label-for=\"name\"\n      :title=\"title\"\n      :subtitle=\"subtitle\"\n      :required=\"required\"\n    >\n      <template #title>\n        <slot name=\"title\"></slot>\n      </template>\n      <template #subtitle>\n        <slot name=\"subtitle\"></slot>\n      </template>\n    </FormInputHeader>\n    <FileSelector\n      :file=\"mFile\"\n      :url=\"mUrl\"\n      v-bind=\"$props\"\n      @preview=\"onSaveDocument\"\n      @change=\"onSelectedFileChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport { saveAs } from 'file-saver'\nimport { props, components } from './input-mixin'\n\nexport default {\n  components: {\n    ...components,\n    FileSelector: () => import('./FileSelector')\n  },\n  model: {\n    prop: 'value',\n    event: 'input'\n  },\n  props: {\n    ...props,\n    path: {\n      type: String,\n      default: null\n    },\n    url: {\n      type: String,\n      default: null\n    }\n  },\n  data () {\n    return {\n      mFile: null,\n      mUrl: null\n    }\n  },\n  computed: {\n    isFileFromStorage () {\n      return typeof this.fullPath === 'string' && this.fullPath.startsWith('http')\n    },\n    isSelectedFileChanged () {\n      return this.mUrl && this.mUrl !== this.url\n    }\n  },\n  watch: {\n    url: {\n      immediate: true,\n      handler (v) {\n        this.mUrl = v\n      }\n    }\n  },\n  methods: {\n    getDocumentTaskFile (path) {\n      return this.$store.dispatch('logbook-documents/getDocument', { path })\n    },\n    onSelectedFileChange (url, file) {\n      this.mUrl = url\n      this.mFile = file\n    },\n    async onSaveDocument () {\n      try {\n        if (this.mFile instanceof File) {\n          saveAs(this.mFile, `${this.mFile.name}`)\n        } else if (typeof this.url === 'string' && this.url.startsWith('http')) {\n          this.$swal.fire({\n            title: 'Mengambil data...',\n            onBeforeOpen: () => this.$swal.showLoading()\n          })\n          const file = await this.$promiseMinDelay(this.getDocumentTaskFile(this.path), 1000)\n          this.$swal.close()\n          saveAs(file, file.name)\n        }\n      } catch (e) {\n        this.$swal.fire({\n          icon: 'error',\n          text: 'Terjadi kesalahan dalam pembacaan dokumen',\n          confirmButtonText: 'Tutup'\n        })\n      }\n    },\n    getSelectedFile () {\n      return this.isSelectedFileChanged ? this.mFile : null\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/Form"}]}