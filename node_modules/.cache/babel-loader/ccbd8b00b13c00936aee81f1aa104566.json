{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js??ref--14-0!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/logbook-documents.js","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/logbook-documents.js","mtime":1673491775271},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js","mtime":1673491969842}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvamRzL0RvY3VtZW50cy9kaXNrb21pbmZvL2pkcy9kaWdpdGVhbS9ncm91cHdhcmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IEdyb3Vwd2FyZUFQSSB9IGZyb20gJy4uLy4uL2xpYi9heGlvcyc7CmV4cG9ydCB2YXIgc3RhdGUgPSBmdW5jdGlvbiBzdGF0ZSgpIHsKICByZXR1cm4gewogICAgZG9jdW1lbnRzOiB7fQogIH07Cn07CmV4cG9ydCB2YXIgbXV0YXRpb25zID0gewogIGtlZXBEb2N1bWVudEluQ2FjaGU6IGZ1bmN0aW9uIGtlZXBEb2N1bWVudEluQ2FjaGUoc3RhdGUsIF9yZWYpIHsKICAgIHZhciBpZCA9IF9yZWYuaWQsCiAgICAgICAgZmlsZSA9IF9yZWYuZmlsZTsKCiAgICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJyAmJiBpZC5sZW5ndGggJiYgZmlsZSBpbnN0YW5jZW9mIEZpbGUpIHsKICAgICAgVnVlLnNldChzdGF0ZS5kb2N1bWVudHMsIGlkLCBmaWxlKTsKICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICBnZXREb2N1bWVudDogZnVuY3Rpb24gZ2V0RG9jdW1lbnQoX3JlZjIpIHsKICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHN0YXRlLCBjb21taXQsIF9yZWYzLCBwYXRoLCBfcmVmMyRjYWNoZUZpcnN0LCBjYWNoZUZpcnN0LCBibG9iLCBmaWxlbmFtZSwgZmlsZTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlLCBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgX3JlZjMgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6IHt9LCBwYXRoID0gX3JlZjMucGF0aCwgX3JlZjMkY2FjaGVGaXJzdCA9IF9yZWYzLmNhY2hlRmlyc3QsIGNhY2hlRmlyc3QgPSBfcmVmMyRjYWNoZUZpcnN0ID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjMkY2FjaGVGaXJzdDsKCiAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIHBhdGggIT09ICdzdHJpbmcnIHx8ICFwYXRoLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3BhdGggaXMgZWl0aGVyIGVtcHR5IG9yIG5vdCBhIHN0cmluZycpKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgaWYgKCEocGF0aCBpbiBzdGF0ZS5kb2N1bWVudHMgPT09IGZhbHNlIHx8IGNhY2hlRmlyc3QgPT09IGZhbHNlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gR3JvdXB3YXJlQVBJLmdldCgiZmlsZS8iLmNvbmNhdChwYXRoKSwgewogICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGJsb2IgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGZpbGVuYW1lID0gcGF0aC5yZXBsYWNlKCdkb2N1bWVudC8nLCAnJyk7CiAgICAgICAgICAgICAgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgZmlsZW5hbWUpOwogICAgICAgICAgICAgIGNvbW1pdCgna2VlcERvY3VtZW50SW5DYWNoZScsIHsKICAgICAgICAgICAgICAgIGlkOiBwYXRoLAogICAgICAgICAgICAgICAgZmlsZTogZmlsZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBzdGF0ZS5kb2N1bWVudHNbcGF0aF0pOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9Cn07"},{"version":3,"sources":["/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/logbook-documents.js"],"names":["Vue","GroupwareAPI","state","documents","mutations","keepDocumentInCache","id","file","length","File","set","actions","getDocument","commit","path","cacheFirst","Promise","reject","Error","get","responseType","then","r","data","blob","filename","replace"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AAC1BC,IAAAA,SAAS,EAAE;AADe,GAAP;AAAA,CAAd;AAIP,OAAO,IAAMC,SAAS,GAAG;AACvBC,EAAAA,mBADuB,+BACFH,KADE,QACmB;AAAA,QAAZI,EAAY,QAAZA,EAAY;AAAA,QAARC,IAAQ,QAARA,IAAQ;;AACxC,QAAI,OAAOD,EAAP,KAAc,QAAd,IAA0BA,EAAE,CAACE,MAA7B,IAAuCD,IAAI,YAAYE,IAA3D,EAAiE;AAC/DT,MAAAA,GAAG,CAACU,GAAJ,CAAQR,KAAK,CAACC,SAAd,EAAyBG,EAAzB,EAA6BC,IAA7B;AACD;AACF;AALsB,CAAlB;AAQP,OAAO,IAAMI,OAAO,GAAG;AACfC,EAAAA,WADe,8BACmD;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAnDV,cAAAA,KAAmD,SAAnDA,KAAmD,EAA5CW,MAA4C,SAA5CA,MAA4C;AAAA,6FAAJ,EAAI,EAAhCC,IAAgC,SAAhCA,IAAgC,2BAA1BC,UAA0B,EAA1BA,UAA0B,iCAAb,IAAa;;AAAA,oBAClE,OAAOD,IAAP,KAAgB,QAAhB,IAA4B,CAACA,IAAI,CAACN,MADgC;AAAA;AAAA;AAAA;;AAAA,+CAE7DQ,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,sCAAV,CAAf,CAF6D;;AAAA;AAAA,oBAIlEJ,IAAI,IAAIZ,KAAK,CAACC,SAAd,KAA4B,KAA5B,IAAqCY,UAAU,KAAK,KAJc;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAKjDd,YAAY,CAACkB,GAAb,gBAAyBL,IAAzB,GAAiC;AAClDM,gBAAAA,YAAY,EAAE;AADoC,eAAjC,EAEhBC,IAFgB,CAEX,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACC,IAAN;AAAA,eAFU,CALiD;;AAAA;AAK9DC,cAAAA,IAL8D;AAQ9DC,cAAAA,QAR8D,GAQnDX,IAAI,CAACY,OAAL,CAAa,WAAb,EAA0B,EAA1B,CARmD;AAS9DnB,cAAAA,IAT8D,GASvD,IAAIE,IAAJ,CAAS,CAACe,IAAD,CAAT,EAAiBC,QAAjB,CATuD;AAUpEZ,cAAAA,MAAM,CAAC,qBAAD,EAAwB;AAC5BP,gBAAAA,EAAE,EAAEQ,IADwB;AAE5BP,gBAAAA,IAAI,EAAEA;AAFsB,eAAxB,CAAN;;AAVoE;AAAA,+CAe/DL,KAAK,CAACC,SAAN,CAAgBW,IAAhB,CAf+D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBvE;AAjBoB,CAAhB","sourcesContent":["import Vue from 'vue'\nimport { GroupwareAPI } from '../../lib/axios'\n\nexport const state = () => ({\n  documents: {}\n})\n\nexport const mutations = {\n  keepDocumentInCache (state, { id, file }) {\n    if (typeof id === 'string' && id.length && file instanceof File) {\n      Vue.set(state.documents, id, file)\n    }\n  }\n}\n\nexport const actions = {\n  async getDocument ({ state, commit }, { path, cacheFirst = true } = {}) {\n    if (typeof path !== 'string' || !path.length) {\n      return Promise.reject(new Error('path is either empty or not a string'))\n    }\n    if (path in state.documents === false || cacheFirst === false) {\n      const blob = await GroupwareAPI.get(`file/${path}`, {\n        responseType: 'blob'\n      }).then(r => r.data)\n      const filename = path.replace('document/', '')\n      const file = new File([blob], filename)\n      commit('keepDocumentInCache', {\n        id: path,\n        file: file\n      })\n    }\n    return state.documents[path]\n  }\n}\n"]}]}