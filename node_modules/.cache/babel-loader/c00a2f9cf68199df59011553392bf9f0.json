{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js??ref--14-0!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/auth.js","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/auth.js","mtime":1673512536613},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/eslint-loader/index.js","mtime":1673491969842}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9qZHMvRG9jdW1lbnRzL2Rpc2tvbWluZm8vamRzL2RpZ2l0ZWFtL2dyb3Vwd2FyZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9qZHMvRG9jdW1lbnRzL2Rpc2tvbWluZm8vamRzL2RpZ2l0ZWFtL2dyb3Vwd2FyZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2pkcy9Eb2N1bWVudHMvZGlza29taW5mby9qZHMvZGlnaXRlYW0vZ3JvdXB3YXJlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX211dGF0aW9uczsKCmltcG9ydCBhZGRIb3VycyBmcm9tICdkYXRlLWZucy9hZGRIb3Vycyc7CmltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4uL211dGF0aW9uLXR5cGVzJzsKaW1wb3J0IHsgR3JvdXB3YXJlQVBJLCBzZXRUb2tlbiB9IGZyb20gJy4uLy4uL2xpYi9heGlvcyc7CmltcG9ydCB7IHNldFRva2VuSW5Db29raWUsIHNldFJlZnJlc2hUb2tlbkluQ29va2llIH0gZnJvbSAnLi4vLi4vbGliL2pzLWNvb2tpZSc7CmltcG9ydCB7IGdldElkRnJvbVVybCwgZ29vZ2xlRHJpdmVVcmwgfSBmcm9tICcuLi8uLi9saWIvc3RyaW5nJzsgLy8gc3RhdGUKCmV4cG9ydCB2YXIgc3RhdGUgPSB7CiAgbG9hZGluZzogdHJ1ZSwKICB1c2VyOiBudWxsCn07IC8vIGdldHRlcnMKCmV4cG9ydCB2YXIgZ2V0dGVycyA9IHsKICBsb2FkaW5nOiBmdW5jdGlvbiBsb2FkaW5nKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubG9hZGluZzsKICB9LAogIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyOwogIH0sCiAgY2hlY2s6IGZ1bmN0aW9uIGNoZWNrKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlciAhPT0gbnVsbDsKICB9LAogIGlzSW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uIGlzSW5pdGlhbGl6ZWQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5sb2FkaW5nOwogIH0KfTsgLy8gbXV0YXRpb25zCgpleHBvcnQgdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5BVVRIX0xPQURJTkcsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLmxvYWRpbmcgPSB0cnVlOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIHR5cGVzLkFVVEhfSU5JVElBTElaRUQsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5TRVRfVVNFUiwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmKSB7CiAgdmFyIHVzZXIgPSBfcmVmLnVzZXI7CiAgc3RhdGUudXNlciA9IHVzZXI7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgdHlwZXMuVU5BVVRIRU5USUNBVEVELCBmdW5jdGlvbiAoc3RhdGUpIHsKICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgc3RhdGUudXNlciA9IG51bGw7Cn0pLCBfbXV0YXRpb25zKTsKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIG9uTG9naW5TdWNjZXNzOiBmdW5jdGlvbiBvbkxvZ2luU3VjY2VzcyhfcmVmMiwgX3JlZjMpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB0b2tlbiwgZXhwaXJlZEF0LCByZWZyZXNoVG9rZW47CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgdG9rZW4gPSBfcmVmMy50b2tlbiwgZXhwaXJlZEF0ID0gX3JlZjMuZXhwaXJlZEF0LCByZWZyZXNoVG9rZW4gPSBfcmVmMy5yZWZyZXNoVG9rZW47CgogICAgICAgICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc2V0VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgIHNldFRva2VuSW5Db29raWUodG9rZW4sIHsKICAgICAgICAgICAgICAgIGV4cGlyZXM6IGFkZEhvdXJzKG5ldyBEYXRlKCksIDI0KQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHNldFJlZnJlc2hUb2tlbkluQ29va2llKHJlZnJlc2hUb2tlbik7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdnZXRVc2VyUHJvZmlsZScpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb25Mb2dpbkZhaWxlZCcpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG9uTG9naW5GYWlsZWQ6IGZ1bmN0aW9uIG9uTG9naW5GYWlsZWQoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICBzZXRUb2tlbihudWxsKTsKICAgIHNldFRva2VuSW5Db29raWUobnVsbCk7CiAgICBzZXRSZWZyZXNoVG9rZW5JbkNvb2tpZShudWxsKTsKICAgIGNvbW1pdCh0eXBlcy5VTkFVVEhFTlRJQ0FURUQpOwogIH0sCiAgbG9naW5Vc2luZ1VzZXJuYW1lQW5kUGFzc3dvcmQ6IGZ1bmN0aW9uIGxvZ2luVXNpbmdVc2VybmFtZUFuZFBhc3N3b3JkKF9yZWY1LCBfcmVmNikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB1c2VybmFtZSwgcGFzc3dvcmQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoOwogICAgICAgICAgICAgIHVzZXJuYW1lID0gX3JlZjYudXNlcm5hbWUsIHBhc3N3b3JkID0gX3JlZjYucGFzc3dvcmQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBHcm91cHdhcmVBUEkucG9zdCgnL2F1dGgvbG9naW4vJywgewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmNykgewogICAgICAgICAgICAgICAgdmFyIHRva2VuID0gX3JlZjcuYXV0aF90b2tlbiwKICAgICAgICAgICAgICAgICAgICBleHBpcmVkQXQgPSBfcmVmNy5leHAsCiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuID0gX3JlZjcucmVmcmVzaF90b2tlbjsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb25Mb2dpblN1Y2Nlc3MnLCB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICAgICAgICAgICAgZXhwaXJlZEF0OiBleHBpcmVkQXQsCiAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VuCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnb25Mb2dpbkZhaWxlZCcpOwogICAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNvbW1pdCh0eXBlcy5BVVRIX0lOSVRJQUxJWkVEKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWY4KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIGF1dGhDb2RlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmOC5kaXNwYXRjaDsKCiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5HQXV0aCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY29tbWl0KHR5cGVzLkFVVEhfTE9BRElORyk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuR0F1dGguZ2V0QXV0aENvZGUoKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBhdXRoQ29kZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gR3JvdXB3YXJlQVBJLnBvc3QoInNvY2lhbC9nb29nbGUtb2F1dGgyLyIsIHsKICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogYXV0aENvZGUKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWY5KSB7CiAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBfcmVmOS5hdXRoX3Rva2VuLAogICAgICAgICAgICAgICAgICAgIGV4cGlyZWRBdCA9IF9yZWY5LmV4cCwKICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW4gPSBfcmVmOS5yZWZyZXNoX3Rva2VuOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdvbkxvZ2luU3VjY2VzcycsIHsKICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuLAogICAgICAgICAgICAgICAgICBleHBpcmVkQXQ6IGV4cGlyZWRBdCwKICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZWZyZXNoVG9rZW4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdvbkxvZ2luRmFpbGVkJyk7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb21taXQodHlwZXMuQVVUSF9JTklUSUFMSVpFRCk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIGdldFVzZXJQcm9maWxlOiBmdW5jdGlvbiBnZXRVc2VyUHJvZmlsZShfcmVmMTApIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICB2YXIgc3RhdGUsIGNvbW1pdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYxMC5zdGF0ZSwgY29tbWl0ID0gX3JlZjEwLmNvbW1pdDsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLnVzZXIpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBHcm91cHdhcmVBUEkuZ2V0KCcvdXNlci9pbmZvJykudGhlbihmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YS5kYXRhOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHsKICAgICAgICAgICAgICAgIHZhciB1cmxQaG90bzsKICAgICAgICAgICAgICAgIHZhciB1cmkgPSBnZXRJZEZyb21VcmwocHJvZmlsZS5waG90byk7CgogICAgICAgICAgICAgICAgaWYgKHVyaSkgewogICAgICAgICAgICAgICAgICB1cmxQaG90byA9ICIiLmNvbmNhdChnb29nbGVEcml2ZVVybCkuY29uY2F0KHVyaSwgIiZzej13e3syMDB9fS1oe3sxMDB9fSIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbW1pdCh0eXBlcy5TRVRfVVNFUiwgewogICAgICAgICAgICAgICAgICB1c2VyOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb2ZpbGUpLCB7fSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtYV9sZW5na2FwLAogICAgICAgICAgICAgICAgICAgIGphYmF0YW46IHByb2ZpbGUuamFiYXRhbiwKICAgICAgICAgICAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCwKICAgICAgICAgICAgICAgICAgICBwaG90bzogdXJsUGhvdG8KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBzdGF0ZS51c2VyKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSgpOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAod2luZG93LkdBdXRoKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5HQXV0aC5zaWduT3V0KCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgc2V0VG9rZW4obnVsbCk7CiAgICAgICAgICAgICAgc2V0VG9rZW5JbkNvb2tpZShudWxsKTsKICAgICAgICAgICAgICBzZXRSZWZyZXNoVG9rZW5JbkNvb2tpZShudWxsKTsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU1KTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/store/modules/auth.js"],"names":["addHours","types","GroupwareAPI","setToken","setTokenInCookie","setRefreshTokenInCookie","getIdFromUrl","googleDriveUrl","state","loading","user","getters","check","isInitialized","mutations","AUTH_LOADING","AUTH_INITIALIZED","SET_USER","UNAUTHENTICATED","actions","onLoginSuccess","commit","dispatch","token","expiredAt","refreshToken","expires","Date","onLoginFailed","loginUsingUsernameAndPassword","username","password","post","then","r","data","auth_token","exp","refresh_token","catch","err","login","window","GAuth","getAuthCode","authCode","access_token","headers","finally","getUserProfile","get","profile","urlPhoto","uri","photo","name","nama_lengkap","jabatan","email","logout","signOut","location","reload"],"mappings":"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","sourcesContent":["import addHours from 'date-fns/addHours'\nimport * as types from '../mutation-types'\nimport { GroupwareAPI, setToken } from '../../lib/axios'\nimport { setTokenInCookie, setRefreshTokenInCookie } from '../../lib/js-cookie'\nimport { getIdFromUrl, googleDriveUrl } from '../../lib/string'\n// state\nexport const state = {\n  loading: true,\n  user: null\n}\n\n// getters\nexport const getters = {\n  loading: state => state.loading,\n  user: state => state.user,\n  check: state => state.user !== null,\n  isInitialized: state => state.loading\n}\n\n// mutations\nexport const mutations = {\n  [types.AUTH_LOADING] (state) {\n    state.loading = true\n  },\n\n  [types.AUTH_INITIALIZED] (state) {\n    state.loading = false\n  },\n\n  [types.SET_USER] (state, { user }) {\n    state.user = user\n  },\n\n  [types.UNAUTHENTICATED] (state) {\n    state.loading = false\n    state.user = null\n  }\n}\n\nexport const actions = {\n  async onLoginSuccess ({ commit, dispatch }, { token, expiredAt, refreshToken }) {\n    if (token) {\n      setToken(token)\n      setTokenInCookie(token, {\n        expires: addHours(new Date(), 24)\n      })\n      setRefreshTokenInCookie(refreshToken)\n      await dispatch('getUserProfile')\n    } else {\n      await dispatch('onLoginFailed')\n    }\n  },\n  onLoginFailed ({ commit }) {\n    setToken(null)\n    setTokenInCookie(null)\n    setRefreshTokenInCookie(null)\n    commit(types.UNAUTHENTICATED)\n  },\n  async loginUsingUsernameAndPassword ({ commit, dispatch }, { username, password }) {\n    await GroupwareAPI.post('/auth/login/', {\n      username,\n      password\n    }).then(r => r.data)\n      .then(({ auth_token: token, exp: expiredAt, refresh_token: refreshToken }) => {\n        return dispatch('onLoginSuccess', {\n          token,\n          expiredAt,\n          refreshToken\n        })\n      })\n      .catch((err) => {\n        dispatch('onLoginFailed')\n        throw err\n      })\n    commit(types.AUTH_INITIALIZED)\n  },\n  async login ({ commit, dispatch }) {\n    if (!window.GAuth) {\n      return\n    }\n    commit(types.AUTH_LOADING)\n    const authCode = await window.GAuth.getAuthCode()\n    await GroupwareAPI.post(`social/google-oauth2/`, {\n      access_token: authCode\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(r => r.data)\n      .then(({ auth_token: token, exp: expiredAt, refresh_token: refreshToken }) => {\n        return dispatch('onLoginSuccess', {\n          token,\n          expiredAt,\n          refreshToken\n        })\n      })\n      .catch((err) => {\n        dispatch('onLoginFailed')\n        throw err\n      })\n      .finally(() => {\n        commit(types.AUTH_INITIALIZED)\n      })\n  },\n  async getUserProfile ({ state, commit }) {\n    if (!state.user) {\n      await GroupwareAPI.get('/user/info')\n        .then(r => r.data.data)\n        .then(profile => {\n          let urlPhoto\n          const uri = getIdFromUrl(profile.photo)\n          if (uri) {\n            urlPhoto = `${googleDriveUrl}${uri}&sz=w{{200}}-h{{100}}`\n          }\n          commit(types.SET_USER, {\n            user: {\n              ...profile,\n              name: profile.nama_lengkap,\n              jabatan: profile.jabatan,\n              email: profile.email,\n              photo: urlPhoto\n            }\n          })\n        })\n    }\n    return state.user\n  },\n  async logout () {\n    if (!window.GAuth) {\n      return\n    }\n    await window.GAuth.signOut()\n    setToken(null)\n    setTokenInCookie(null)\n    setRefreshTokenInCookie(null)\n    await window.location.reload()\n  }\n}\n"]}]}