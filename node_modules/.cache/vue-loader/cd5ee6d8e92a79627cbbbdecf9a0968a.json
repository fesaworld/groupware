{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Attendance/CheckinForm/form-submission.vue?vue&type=style&index=0&id=0278f03e&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Attendance/CheckinForm/form-submission.vue","mtime":1673491775260},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/css-loader/dist/cjs.js","mtime":1673491970692},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673491936529},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/postcss-loader/src/index.js","mtime":1673491966590},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/sass-loader/dist/cjs.js","mtime":1673491959555},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNoZWNraW4tY29uZmlybWF0aW9uIHsKICBAYXBwbHkgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4gbWF4LWgtZnVsbDsKCiAgJl9fYm9keSB7CiAgICBAYXBwbHkgZmxleC0xIHAtNCBvdmVyZmxvdy15LWF1dG87CgogICAgPiBsYWJlbCB7CiAgICAgIEBhcHBseSBmb250LWJvbGQgdGV4dC1zbTsKICAgIH0KCiAgICA+IHAgewogICAgICBAYXBwbHkgbWItMgogICAgICB0ZXh0LWJhc2U7CiAgICB9CiAgfQoKICAmX19hY3Rpb25zIHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgxLCAxZnIpOwogICAgZ2FwOiAxcmVtOwogICAgYm94LXNoYWRvdzogMCAtNHB4IDE2cHggMCByZ2JhKDAsMCwwLDAuMSk7CiAgICBAYXBwbHkgcmVsYXRpdmUgei0xMAogICAgZmxleC1ub25lCiAgICBtdC00IHAtNDsKCiAgICBAc2NyZWVuIG1kIHsKICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsKICAgIH0KICB9CgogICZfX2J0biB7CiAgICBib3JkZXItY29sb3I6IGN1cnJlbnRDb2xvcjsKICAgIEBhcHBseSBweC00IHB5LTIgcm91bmRlZAogICAgYm9yZGVyIGJvcmRlci1zb2xpZDsKCiAgICAmLmJ0bi1jb25maXJtIHsKICAgICAgQGFwcGx5IGJnLWJsdWUtNjAwIHRleHQtd2hpdGU7CiAgICB9CgogICAgJi5idG4tY2FuY2VsIHsKICAgICAgQGFwcGx5IGJnLXdoaXRlIHRleHQtYmx1ZS02MDA7CiAgICB9CiAgfQp9Cgouc3VibWl0LXN0YXR1cyB7CiAgQGFwcGx5IHRleHQtY2VudGVyOwoKICA+IGltZyB7CiAgICBAYXBwbHkgbWItOCBteC1hdXRvOwogIH0KCiAgJl9fdGV4dCB7CiAgICBAYXBwbHkgdGV4dC14bCBmb250LWJvbGQ7CiAgfQoKICAmX19idG4tY2xvc2UgewogICAgQGFwcGx5IHctZnVsbCBtdC04IHB4LTQgcHktMiByb3VuZGVkLWxnCiAgICBib3JkZXIgYm9yZGVyLXNvbGlkIGJvcmRlci1ncmF5LTYwMAogICAgYmctZ3JheS0xMDAKICAgIHRleHQtZ3JheS02MDA7CiAgfQp9Cg=="},{"version":3,"sources":["form-submission.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form-submission.vue","sourceRoot":"src/components/Attendance/CheckinForm","sourcesContent":["<template>\n  <div class=\"checkin-confirmation\">\n    <template v-if=\"!isFormSubmitted\">\n      <div v-if=\"payload\" class=\"checkin-confirmation__body\">\n        <h3 class=\"text-xl font-bold dark:text-gray-300\">\n          Konfirmasi Checkin\n        </h3>\n        <p class=\"mb-3 text-gray-800 dark:text-gray-400\">\n          Yuk cek lagi data checkin kamu hari ini.\n        </p>\n        <strong class=\"text-green-600 dark:text-gray-300 text-lg\">Hadir ({{ payload.location }})</strong>\n        <br />\n        <label class=\"text-gray-500 dark:text-gray-300\">Tanggal</label>\n        <p class=\"text-gray-800 dark:text-gray-400\">{{ formatDateLong(payload.date) }}</p>\n\n        <label class=\"text-gray-500 dark:text-gray-300\">Jam Hadir</label>\n        <p class=\"text-gray-800 dark:text-gray-400\">{{ formatTime(payload.date) }}</p>\n\n        <label class=\"text-gray-500 dark:text-gray-300\">Mood</label>\n        <i\n          aria-hidden=\"true\"\n          class=\"block w-12 my-2\">\n          <component\n            :is=\"moodComponent\"\n            :animate=\"true\" />\n        </i>\n\n        <label class=\"text-gray-500 dark:text-gray-300\">Catatan</label>\n        <p class=\"text-gray-800 dark:text-gray-400\">{{ payload.note || '-' }}</p>\n      </div>\n      <div class=\"checkin-confirmation__actions\">\n          <button class=\"checkin-confirmation__btn btn-confirm\" @click=\"onSubmit\">\n            Sudah Benar\n          </button>\n          <button class=\"checkin-confirmation__btn btn-cancel\" @click=\"onEditData\">\n            Edit Lagi\n          </button>\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"checkin-confirmation__body\">\n        <APIPostDataLoadingDialog v-if=\"isFormSubmitted\" :state=\"formSubmissionStatus\" @close=\"onClose\">\n          <template #message-error>\n            {{ formSubmissionError }}\n          </template>\n        </APIPostDataLoadingDialog>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport pMinDelay from 'p-min-delay'\nimport { GroupwareAPI } from '../../../lib/axios'\nimport { formatDateLong, formatTime } from '../../../lib/date'\nimport { moods } from '../../Reactions'\n\nconst STATUS = {\n  LOADING: 'LOADING',\n  SUCCESS: 'SUCCESS',\n  ERROR: 'ERROR'\n}\n\nexport default {\n  components: {\n    APIPostDataLoadingDialog: () => import('../../APIPostDataLoadingDialog')\n  },\n  props: {\n    payload: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data () {\n    return {\n      STATUS,\n      isFormSubmitted: false,\n      formSubmissionStatus: null,\n      formSubmissionError: null\n    }\n  },\n  computed: {\n    // format payload as required\n    formattedPayload () {\n      const { date, ...rest } = this.payload\n      const payload = Object.assign({}, rest, {\n        date: date instanceof Date ? date.toISOString() : null\n      })\n      return payload\n    },\n    moodComponent () {\n      const { mood } = this.payload\n      const matched = moods.find((m) => m.value === mood)\n      return matched ? matched.component : null\n    }\n  },\n  methods: {\n    formatDateLong: date => date ? formatDateLong(date, 'eeee, PPP') : null,\n    formatTime: time => time ? formatTime(time) : null,\n\n    onEditData () {\n      this.$emit('cancel')\n    },\n    onClose () {\n      if (this.isFormSubmitted) {\n        switch (this.formSubmissionStatus) {\n          case STATUS.SUCCESS: return this.$emit('success')\n          case STATUS.ERROR: return this.$emit('error', this.formSubmissionError)\n          default: break\n        }\n      } else {\n        this.$emit('close')\n      }\n    },\n    async onSubmit () {\n      this.formSubmissionStatus = STATUS.LOADING\n      this.formSubmissionError = null\n      this.isFormSubmitted = true\n      try {\n        const post = GroupwareAPI.post('attendance/checkin', this.payload)\n        await pMinDelay(post, 1500)\n        await this.$store.dispatch('checkins-list/getCheckinState', { refresh: true })\n        await this.$store.dispatch('checkins-list/getCheckoutState', { refresh: true })\n        await this.onSubmitSuccess()\n      } catch (e) {\n        await this.onSubmitError(e)\n      }\n    },\n    async onSubmitSuccess () {\n      this.formSubmissionStatus = STATUS.SUCCESS\n    },\n    async onSubmitError (err) {\n      this.formSubmissionStatus = STATUS.ERROR\n      if (err.response) {\n        this.formSubmissionError = err.response.data.message\n      } else if (err instanceof Error) {\n        this.formSubmissionError = err.message\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.checkin-confirmation {\n  @apply flex flex-col overflow-hidden max-h-full;\n\n  &__body {\n    @apply flex-1 p-4 overflow-y-auto;\n\n    > label {\n      @apply font-bold text-sm;\n    }\n\n    > p {\n      @apply mb-2\n      text-base;\n    }\n  }\n\n  &__actions {\n    display: grid;\n    grid-template-columns: repeat(1, 1fr);\n    gap: 1rem;\n    box-shadow: 0 -4px 16px 0 rgba(0,0,0,0.1);\n    @apply relative z-10\n    flex-none\n    mt-4 p-4;\n\n    @screen md {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n\n  &__btn {\n    border-color: currentColor;\n    @apply px-4 py-2 rounded\n    border border-solid;\n\n    &.btn-confirm {\n      @apply bg-blue-600 text-white;\n    }\n\n    &.btn-cancel {\n      @apply bg-white text-blue-600;\n    }\n  }\n}\n\n.submit-status {\n  @apply text-center;\n\n  > img {\n    @apply mb-8 mx-auto;\n  }\n\n  &__text {\n    @apply text-xl font-bold;\n  }\n\n  &__btn-close {\n    @apply w-full mt-8 px-4 py-2 rounded-lg\n    border border-solid border-gray-600\n    bg-gray-100\n    text-gray-600;\n  }\n}\n</style>\n"]}]}