{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/CheckinForm/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/CheckinForm/form.vue","mtime":1673512170561},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfY2xvbmVEZWVwIGZyb20gJ2xvZGFzaC9jbG9uZURlZXAnCmltcG9ydCBzZXRIb3VycyBmcm9tICdkYXRlLWZucy9zZXRIb3VycycKaW1wb3J0IHNldE1pbnV0ZXMgZnJvbSAnZGF0ZS1mbnMvc2V0TWludXRlcycKaW1wb3J0IHsgZm9ybWF0RGF0ZUxvbmcgfSBmcm9tICcuLi8uLi8uLi9saWIvZGF0ZScKaW1wb3J0IHsgQVRURU5EQU5DRSB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb25zdGFudHMnCmltcG9ydCBNb29kSW5wdXQgZnJvbSAnLi9tb29kLWlucHV0JwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKCmNvbnN0IExPQ0FUSU9OID0gewogIFdGSDogJ1dGSCcsCiAgV0ZPOiAnV0ZPJywKICBQRVJKQURJTjogJ1BFUkpBRElOJwp9Cgpjb25zdCBob3VyT3B0aW9ucyA9IG5ldyBBcnJheSgyNCkuZmlsbChudWxsKS5tYXAoKF8sIG4pID0+IHsKICByZXR1cm4gbiA8IDEwID8gYDAke259YCA6IGAke259YAp9KQoKY29uc3QgbWludXRlT3B0aW9ucyA9IG5ldyBBcnJheSg2MCAvIDUpLmZpbGwobnVsbCkubWFwKChfLCBuKSA9PiB7CiAgcmV0dXJuIChuIDwgMTAgLyA1KSA/IGAwJHtuICogNX1gIDogYCR7biAqIDV9YAp9KQoKY29uc3QgbG9jYXRpb25PcHRpb25zID0gWwogIExPQ0FUSU9OLldGSCwKICBMT0NBVElPTi5XRk8sCiAgTE9DQVRJT04uUEVSSkFESU4KXQoKY29uc3QgZW1wdHlQYXlsb2FkID0gewogIGRhdGU6IG51bGwsCiAgbG9jYXRpb246IG51bGwsCiAgbWVzc2FnZTogQVRURU5EQU5DRS5QUkVTRU5ULAogIG5vdGU6IG51bGwsCiAgbW9vZDogbnVsbAp9CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTW9vZElucHV0LAogICAgSW5wdXRIZWFkZXI6ICgpID0+IGltcG9ydCgnLi4vLi4vRm9ybS9JbnB1dEhlYWRlcicpLAogICAgSW5wdXQ6ICgpID0+IGltcG9ydCgnLi4vLi4vRm9ybS9JbnB1dCcpLAogICAgSW5wdXRTZWxlY3Q6ICgpID0+IGltcG9ydCgnLi4vLi4vRm9ybS9TZWxlY3QnKSwKICAgIElucHV0VGV4dGFyZWE6ICgpID0+IGltcG9ydCgnLi4vLi4vRm9ybS9UZXh0YXJlYScpLAogICAgUmFkaW9CdXR0b25Hcm91cDogKCkgPT4gaW1wb3J0KCcuLi8uLi9Gb3JtL1JhZGlvQnV0dG9uR3JvdXAnKSwKICAgIERpYWxvZzogKCkgPT4gaW1wb3J0KCcuLi8uLi9EaWFsb2cnKSwKICAgIFN1Ym1pc3Npb246ICgpID0+IGltcG9ydCgnLi9mb3JtLXN1Ym1pc3Npb24nKQogIH0sCiAgY29tcHV0ZWQ6IG1hcEdldHRlcnMoewogICAgLy8gYXV0aExvYWRpbmc6ICdhdXRoL2xvYWRpbmcnCiAgICB1c2VyOiAnYXV0aC91c2VyJwogIH0pLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9kYXlEYXRlU3RyaW5nOiBmb3JtYXREYXRlTG9uZyhuZXcgRGF0ZSgpKSwKICAgICAgaG91ck9wdGlvbnM6IE9iamVjdC5mcmVlemUoaG91ck9wdGlvbnMpLAogICAgICBtaW51dGVPcHRpb25zOiBPYmplY3QuZnJlZXplKG1pbnV0ZU9wdGlvbnMpLAogICAgICBsb2NhdGlvbk9wdGlvbnM6IE9iamVjdC5mcmVlemUobG9jYXRpb25PcHRpb25zKSwKCiAgICAgIGNoZWNraW5Ib3VyOiBudWxsLAogICAgICBjaGVja2luTWludXRlOiBudWxsLAogICAgICBub3RlUGxhY2Vob2xkZXI6ICdLZXRpa2thbiBsb2thc2kga2VyamEga2FtdS9hZ2VuZGEga2FtdSBoYXJpIGluaS9wZXNhbiBwZW55ZW1hbmdhdCB1bnR1ayB0ZW1hbi10ZW1hbiBrYW11IGRpc2luaScsCiAgICAgIHBheWxvYWQ6IF9jbG9uZURlZXAoZW1wdHlQYXlsb2FkKSwKCiAgICAgIHNob3dTdWJtaXNzaW9uRGlhbG9nOiBmYWxzZQogICAgfQogIH0sCiAgYmVmb3JlTW91bnQgKCkgewogICAgdGhpcy5nZXRDdXJyZW50SG91ckFuZE1pbnV0ZSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtYXREYXRlTG9uZyAoZGF0ZSkgewogICAgICByZXR1cm4gZGF0ZSA/IGZvcm1hdERhdGVMb25nKGRhdGUpIDogbnVsbAogICAgfSwKCiAgICAvKioKICAgICAqIGdldCBjdXJyZW50IGhvdXIsCiAgICAgKiBnZXQgY3VycmVudCBtaW51dGUgdG8gdGhlIG5lYXJlc3QgbXVsdGlwbGljYXRpb24gb2YgNSwKICAgICAqIHNldCBjdXJyZW50IGhvdXIgYW5kIG1pbnV0ZSB0byBjaGVja2luSG91ciBhbmQgY2hlY2tpbk1pbnV0ZQogICAgKi8KICAgIGdldEN1cnJlbnRIb3VyQW5kTWludXRlICgpIHsKICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpCiAgICAgIGxldCBjdXJyZW50SG91ciA9IHRvZGF5LmdldEhvdXJzKCkKCiAgICAgIGxldCBjdXJyZW50TWludXRlID0gTWF0aC5yb3VuZCh0b2RheS5nZXRNaW51dGVzKCkgLyA1KSAqIDUKICAgICAgaWYgKGN1cnJlbnRNaW51dGUgPCAxMCkgewogICAgICAgIGN1cnJlbnRNaW51dGUgPSBgMCR7Y3VycmVudE1pbnV0ZX1gCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudE1pbnV0ZSA9PT0gNjApIHsKICAgICAgICBjdXJyZW50TWludXRlID0gJzAwJwogICAgICAgIGN1cnJlbnRIb3VyICs9IDEKICAgICAgfSBlbHNlIHsKICAgICAgICBjdXJyZW50TWludXRlID0gY3VycmVudE1pbnV0ZS50b1N0cmluZygpCiAgICAgIH0KCiAgICAgIGlmIChjdXJyZW50SG91ciA8IDEwKSB7CiAgICAgICAgY3VycmVudEhvdXIgPSBgMCR7Y3VycmVudEhvdXJ9YAogICAgICB9CiAgICAgIHRoaXMuY2hlY2tpbkhvdXIgPSBjdXJyZW50SG91cgogICAgICB0aGlzLmNoZWNraW5NaW51dGUgPSBjdXJyZW50TWludXRlCiAgICAgIHRoaXMudXBkYXRlQ2hlY2tpbkRhdGVQYXlsb2FkKHsKICAgICAgICBob3VyOiBjdXJyZW50SG91ciwKICAgICAgICBtaW46IGN1cnJlbnRNaW51dGUKICAgICAgfSkKICAgIH0sCiAgICB1cGRhdGVDaGVja2luRGF0ZVBheWxvYWQgKHsgaG91ciwgbWluIH0pIHsKICAgICAgbGV0IHsgZGF0ZSB9ID0gdGhpcy5wYXlsb2FkCiAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSA9PT0gZmFsc2UpIHsKICAgICAgICBkYXRlID0gbmV3IERhdGUoKQogICAgICB9CiAgICAgIGlmIChob3VyKSB7CiAgICAgICAgZGF0ZSA9IHNldEhvdXJzKGRhdGUsIGhvdXIpCiAgICAgIH0KICAgICAgaWYgKG1pbikgewogICAgICAgIGRhdGUgPSBzZXRNaW51dGVzKGRhdGUsIG1pbikKICAgICAgfQogICAgICB0aGlzLiRzZXQodGhpcy5wYXlsb2FkLCAnZGF0ZScsIGRhdGUpCiAgICB9LAogICAgb25DaGVja2luSG91ckNoYW5nZWQgKGhvdXIpIHsKICAgICAgdGhpcy5jaGVja2luSG91ciA9IGhvdXIKICAgICAgdGhpcy51cGRhdGVDaGVja2luRGF0ZVBheWxvYWQoeyBob3VyIH0pCiAgICB9LAogICAgb25DaGVja2luTWludXRlQ2hhbmdlZCAobWluKSB7CiAgICAgIHRoaXMuY2hlY2tpbk1pbnV0ZSA9IG1pbgogICAgICB0aGlzLnVwZGF0ZUNoZWNraW5EYXRlUGF5bG9hZCh7IG1pbiB9KQogICAgfSwKCiAgICBiZWZvcmVTdWJtaXQgKCkgewogICAgICB0aGlzLnNob3dTdWJtaXNzaW9uRGlhbG9nID0gdHJ1ZQogICAgfSwKCiAgICBvblN1Ym1pc3Npb25TdWNjZXNzICgpIHsKICAgICAgdGhpcy5vbkNsb3NlQ29uZmlybWF0aW9uRGlhbG9nKCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9jaGVja2lucycpCiAgICB9LAogICAgb25TdWJtaXNzaW9uRXJyb3IgKC8qIGVyciAqLykgewogICAgICB0aGlzLm9uQ2xvc2VDb25maXJtYXRpb25EaWFsb2coKQogICAgfSwKICAgIG9uQ2xvc2VDb25maXJtYXRpb25EaWFsb2cgKCkgewogICAgICB0aGlzLnNob3dTdWJtaXNzaW9uRGlhbG9nID0gZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/components/Attendance/CheckinForm","sourcesContent":["<template>\n  <ValidationObserver #default=\"{ handleSubmit }\">\n    <div class=\"checkin-form\">\n      <span class=\"checkin-form__date text-gray-600 dark:text-gray-300\">\n        {{ todayDateString }}\n      </span>\n      <!-- START: CHECKIN HOUR AND MINUTE INPUT -->\n      <div class=\"checkin-form__input-segment\" v-if=\"user.manager_category!='Tim Pengelola Layanan Digital'\">\n        <InputHeader\n          label-for=\"checkinHour_checkinMinute\"\n          title=\"Jam Kehadiran\"\n        />\n        <div class=\"checkin-form__hour-min\">\n          <p class=\"text-gray-600 dark:text-gray-300\">Jam</p>\n          <p class=\"text-gray-600 dark:text-gray-300\">Menit</p>\n          <Input disabled\n            name=\"checkinHour\"\n            :value=\"checkinHour\"\n            />\n          <Input disabled\n            name=\"checkinMinute\"\n            :value=\"checkinMinute\"\n            />\n        </div>\n      </div>\n      <div class=\"checkin-form__input-segment\" v-else>\n        <InputHeader\n          label-for=\"checkinHour_checkinMinute\"\n          title=\"Jam Kehadiran\"\n        />\n        <div class=\"checkin-form__hour-min\">\n          <InputSelect\n            name=\"checkinHour\"\n            :options=\"hourOptions\"\n            :value=\"checkinHour\"\n            rules=\"required\"\n            prompt=\"Jam\"\n            @change=\"onCheckinHourChanged\"\n            />\n          <InputSelect\n            name=\"checkinMinute\"\n            :options=\"minuteOptions\"\n            :value=\"checkinMinute\"\n            rules=\"required\"\n            prompt=\"Menit\"\n            @change=\"onCheckinMinuteChanged\"\n            />\n        </div>\n      </div>\n      <!-- END: CHECKIN HOUR AND MINUTE INPUT -->\n\n      <!-- START: LOCATION INPUT -->\n      <div class=\"checkin-form__input-segment\">\n        <RadioButtonGroup\n          class=\"mb-2\"\n          name=\"location\"\n          title=\"Jenis Kehadiran\"\n          rules=\"required\"\n          :disabled=\"false\"\n          :block=\"true\"\n          :options=\"locationOptions\"\n          :custom-messages=\"{\n            required: 'Jenis kehadiran harus diisi'\n          }\"\n          v-model=\"payload.location\"\n        >\n          <template #subtitle>\n            <span class=\"italic text-gray-500\">\n              Pilih salah satu\n            </span>\n          </template>\n        </RadioButtonGroup>\n      </div>\n      <!-- END: LOCATION INPUT -->\n\n      <div class=\"checkin-form__input-segment\">\n        <MoodInput\n          class=\"mb-12\"\n          name=\"mood\"\n          v-model=\"payload.mood\"\n        />\n      </div>\n\n      <!-- START: NOTE INPUT -->\n      <div class=\"checkin-form__input-segment\">\n        <InputTextarea\n          name=\"note\"\n          rows=\"5\"\n          title=\"Catatan Agenda\"\n          :required=\"false\"\n          :placeholder=\"notePlaceholder\"\n          v-model=\"payload.note\"\n          />\n      </div>\n      <!-- END: NOTE INPUT -->\n    </div>\n    <button class=\"checkin-form__btn-submit\" @click=\"handleSubmit(beforeSubmit)\">\n      Kirim\n    </button>\n\n    <Dialog :show=\"showSubmissionDialog\">\n      <Submission\n        v-if=\"showSubmissionDialog\"\n        v-bind=\"{ payload }\"\n        @success=\"onSubmissionSuccess\"\n        @error=\"onSubmissionError\"\n        @cancel=\"onCloseConfirmationDialog\"\n        @close=\"onCloseConfirmationDialog\"/>\n    </Dialog>\n  </ValidationObserver>\n</template>\n\n<script>\nimport _cloneDeep from 'lodash/cloneDeep'\nimport setHours from 'date-fns/setHours'\nimport setMinutes from 'date-fns/setMinutes'\nimport { formatDateLong } from '../../../lib/date'\nimport { ATTENDANCE } from '../../../lib/constants'\nimport MoodInput from './mood-input'\nimport { mapGetters } from 'vuex'\n\nconst LOCATION = {\n  WFH: 'WFH',\n  WFO: 'WFO',\n  PERJADIN: 'PERJADIN'\n}\n\nconst hourOptions = new Array(24).fill(null).map((_, n) => {\n  return n < 10 ? `0${n}` : `${n}`\n})\n\nconst minuteOptions = new Array(60 / 5).fill(null).map((_, n) => {\n  return (n < 10 / 5) ? `0${n * 5}` : `${n * 5}`\n})\n\nconst locationOptions = [\n  LOCATION.WFH,\n  LOCATION.WFO,\n  LOCATION.PERJADIN\n]\n\nconst emptyPayload = {\n  date: null,\n  location: null,\n  message: ATTENDANCE.PRESENT,\n  note: null,\n  mood: null\n}\n\nexport default {\n  components: {\n    MoodInput,\n    InputHeader: () => import('../../Form/InputHeader'),\n    Input: () => import('../../Form/Input'),\n    InputSelect: () => import('../../Form/Select'),\n    InputTextarea: () => import('../../Form/Textarea'),\n    RadioButtonGroup: () => import('../../Form/RadioButtonGroup'),\n    Dialog: () => import('../../Dialog'),\n    Submission: () => import('./form-submission')\n  },\n  computed: mapGetters({\n    // authLoading: 'auth/loading'\n    user: 'auth/user'\n  }),\n  data () {\n    return {\n      todayDateString: formatDateLong(new Date()),\n      hourOptions: Object.freeze(hourOptions),\n      minuteOptions: Object.freeze(minuteOptions),\n      locationOptions: Object.freeze(locationOptions),\n\n      checkinHour: null,\n      checkinMinute: null,\n      notePlaceholder: 'Ketikkan lokasi kerja kamu/agenda kamu hari ini/pesan penyemangat untuk teman-teman kamu disini',\n      payload: _cloneDeep(emptyPayload),\n\n      showSubmissionDialog: false\n    }\n  },\n  beforeMount () {\n    this.getCurrentHourAndMinute()\n  },\n  methods: {\n    formatDateLong (date) {\n      return date ? formatDateLong(date) : null\n    },\n\n    /**\n     * get current hour,\n     * get current minute to the nearest multiplication of 5,\n     * set current hour and minute to checkinHour and checkinMinute\n    */\n    getCurrentHourAndMinute () {\n      const today = new Date()\n      let currentHour = today.getHours()\n\n      let currentMinute = Math.round(today.getMinutes() / 5) * 5\n      if (currentMinute < 10) {\n        currentMinute = `0${currentMinute}`\n      } else if (currentMinute === 60) {\n        currentMinute = '00'\n        currentHour += 1\n      } else {\n        currentMinute = currentMinute.toString()\n      }\n\n      if (currentHour < 10) {\n        currentHour = `0${currentHour}`\n      }\n      this.checkinHour = currentHour\n      this.checkinMinute = currentMinute\n      this.updateCheckinDatePayload({\n        hour: currentHour,\n        min: currentMinute\n      })\n    },\n    updateCheckinDatePayload ({ hour, min }) {\n      let { date } = this.payload\n      if (date instanceof Date === false) {\n        date = new Date()\n      }\n      if (hour) {\n        date = setHours(date, hour)\n      }\n      if (min) {\n        date = setMinutes(date, min)\n      }\n      this.$set(this.payload, 'date', date)\n    },\n    onCheckinHourChanged (hour) {\n      this.checkinHour = hour\n      this.updateCheckinDatePayload({ hour })\n    },\n    onCheckinMinuteChanged (min) {\n      this.checkinMinute = min\n      this.updateCheckinDatePayload({ min })\n    },\n\n    beforeSubmit () {\n      this.showSubmissionDialog = true\n    },\n\n    onSubmissionSuccess () {\n      this.onCloseConfirmationDialog()\n      this.$router.push('/checkins')\n    },\n    onSubmissionError (/* err */) {\n      this.onCloseConfirmationDialog()\n    },\n    onCloseConfirmationDialog () {\n      this.showSubmissionDialog = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.checkin-form {\n  &__date {\n    @apply block mb-8 text-lg font-bold;\n  }\n\n  &__hour-min {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n  }\n\n  &__input-segment {\n    & + & {\n      margin-top: 1.5rem;\n    }\n  }\n\n  &__btn-submit {\n    @apply w-full mt-12\n    px-4 py-2\n    rounded\n    bg-blue-600\n    text-white;\n\n    &:hover {\n      @apply bg-blue-700;\n    }\n  }\n}\n</style>\n"]}]}