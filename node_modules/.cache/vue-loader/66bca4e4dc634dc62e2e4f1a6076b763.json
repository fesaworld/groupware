{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/DayoffForm/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/DayoffForm/form.vue","mtime":1673491775260},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfY2xvbmVEZWVwIGZyb20gJ2xvZGFzaC9jbG9uZURlZXAnCmltcG9ydCB7IFBFUk1JVCwgU1RBS0VIT0xERVIgfSBmcm9tICcuLi8uLi8uLi9saWIvY29uc3RhbnRzJwoKY29uc3QgZW1wdHlQYXlsb2FkID0gewogIHBlcm1pdHNUeXBlOiBudWxsLAogIHBlcm1pdEFja25vd2xlZGdlZDogW10sCiAgc3RhcnREYXRlOiBudWxsLAogIGVuZERhdGU6IG51bGwsCiAgbm90ZTogbnVsbCwKICBmaWxlOiBudWxsLAogIGltYWdlRmlsZTogbnVsbCwKICBpbWFnZVVSTDogbnVsbAp9Cgpjb25zdCBwZXJtaXRUeXBlT3B0aW9ucyA9IFsKICBQRVJNSVQuU0lDSywKICBQRVJNSVQuTEVBVkUsCiAgUEVSTUlULlBBSURfTEVBVkUKXQoKY29uc3QgcGVybWl0QWNrbm93bGVkZ21lbnRPcHRpb25zID0gWwogIFNUQUtFSE9MREVSLlNUUlVDVFVSQUwsCiAgU1RBS0VIT0xERVIuSFIsCiAgU1RBS0VIT0xERVIuQ09PUkRJTkFUT1IsCiAgU1RBS0VIT0xERVIuV09SS19QQVJUTkVSCl0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTdWJtaXNzaW9uOiAoKSA9PiBpbXBvcnQoJy4vZm9ybS1zdWJtaXNzaW9uJyksCiAgICBEaWFsb2c6ICgpID0+IGltcG9ydCgnLi4vLi4vRGlhbG9nJyksCiAgICBJbnB1dEhlYWRlcjogKCkgPT4gaW1wb3J0KCcuLi8uLi9Gb3JtL0lucHV0SGVhZGVyJyksCiAgICBJbnB1dERhdGVUaW1lOiAoKSA9PiBpbXBvcnQoJy4uLy4uL0Zvcm0vSW5wdXREYXRlVGltZScpLAogICAgSW5wdXRUZXh0YXJlYTogKCkgPT4gaW1wb3J0KCcuLi8uLi9Gb3JtL1RleHRhcmVhJyksCiAgICBSYWRpb0J1dHRvbkdyb3VwOiAoKSA9PiBpbXBvcnQoJy4uLy4uL0Zvcm0vUmFkaW9CdXR0b25Hcm91cCcpLAogICAgRXZpZGVuY2VJbWFnZUlucHV0OiAoKSA9PiBpbXBvcnQoJy4uLy4uL0Zvcm0vRXZpZGVuY2VJbWFnZUlucHV0JykKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcGVybWl0QWNrbm93bGVkZ21lbnRPcHRpb25zOiBPYmplY3QuZnJlZXplKHBlcm1pdEFja25vd2xlZGdtZW50T3B0aW9ucyksCiAgICAgIHBlcm1pdFR5cGVPcHRpb25zOiBPYmplY3QuZnJlZXplKHBlcm1pdFR5cGVPcHRpb25zKSwKICAgICAgbm90ZVBsYWNlaG9sZGVyOiAnS2V0aWtrYW4gYWxhc2FuIGl6aW4ga2FtdSBkaXNpbmknLAoKICAgICAgcGF5bG9hZDogX2Nsb25lRGVlcChlbXB0eVBheWxvYWQpLAoKICAgICAgc2hvd1N1Ym1pc3Npb25EaWFsb2c6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc3RhcnREYXRlSVNPU3RyaW5nICgpIHsKICAgICAgY29uc3QgeyBzdGFydERhdGUgfSA9IHRoaXMucGF5bG9hZAogICAgICByZXR1cm4gc3RhcnREYXRlIGluc3RhbmNlb2YgRGF0ZSA/IHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpIDogbnVsbAogICAgfSwKICAgIGVuZERhdGVJU09TdHJpbmcgKCkgewogICAgICBjb25zdCB7IGVuZERhdGUgfSA9IHRoaXMucGF5bG9hZAogICAgICByZXR1cm4gZW5kRGF0ZSBpbnN0YW5jZW9mIERhdGUgPyBlbmREYXRlLnRvSVNPU3RyaW5nKCkgOiBudWxsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNhbmNlbCAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBwYXRoOiAnL2RheW9mZicKICAgICAgfSkKICAgIH0sCiAgICBpc0Fja25vd2xlZGdlbWVudE9wdGlvbkNoZWNrZWQgKG9wdCkgewogICAgICByZXR1cm4gdGhpcy5wYXlsb2FkLnBlcm1pdEFja25vd2xlZGdlZC5pbmNsdWRlcyhvcHQpCiAgICB9LAogICAgb25BY2tub3dsZWRnZW1lbnRPcHRpb25DaGVja2VkIChvcHQpIHsKICAgICAgbGV0IHsgcGVybWl0QWNrbm93bGVkZ2VkIH0gPSB0aGlzLnBheWxvYWQKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBlcm1pdEFja25vd2xlZGdlZCkpIHsKICAgICAgICBwZXJtaXRBY2tub3dsZWRnZWQgPSBbXQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzQWNrbm93bGVkZ2VtZW50T3B0aW9uQ2hlY2tlZChvcHQpKSB7CiAgICAgICAgcGVybWl0QWNrbm93bGVkZ2VkID0gcGVybWl0QWNrbm93bGVkZ2VkLmZpbHRlcigoYWNrKSA9PiBhY2sgIT09IG9wdCkKICAgICAgfSBlbHNlIHsKICAgICAgICBwZXJtaXRBY2tub3dsZWRnZWQucHVzaChvcHQpCiAgICAgIH0KICAgICAgdGhpcy4kc2V0KHRoaXMucGF5bG9hZCwgJ3Blcm1pdEFja25vd2xlZGdlZCcsIHBlcm1pdEFja25vd2xlZGdlZCkKICAgIH0sCgogICAgaXNTb21lUGVybWl0QWNrbm93bGVkZ2VtZW50RW1wdHkgKHZhbGlkYXRpb25PYnNlcnZlckVycm9ycykgewogICAgICByZXR1cm4gdmFsaWRhdGlvbk9ic2VydmVyRXJyb3JzICYmIHR5cGVvZiB2YWxpZGF0aW9uT2JzZXJ2ZXJFcnJvcnMgPT09ICdvYmplY3QnICYmCiAgICAgICAgT2JqZWN0LnZhbHVlcyh2YWxpZGF0aW9uT2JzZXJ2ZXJFcnJvcnMpLnNvbWUoKGFycikgPT4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5sZW5ndGgpCiAgICB9LAoKICAgIG9uU3RhcnREYXRlQ2hhbmdlZCAoZGF0ZSkgewogICAgICBpZiAoZGF0ZSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnBheWxvYWQsICdzdGFydERhdGUnLCBuZXcgRGF0ZShkYXRlKSkKICAgICAgfQogICAgfSwKICAgIG9uRW5kRGF0ZUNoYW5nZWQgKGRhdGUpIHsKICAgICAgaWYgKGRhdGUpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy5wYXlsb2FkLCAnZW5kRGF0ZScsIG5ldyBEYXRlKGRhdGUpKQogICAgICB9CiAgICB9LAoKICAgIG9uRXZpZGVuY2VJbWFnZVVSTENoYW5nZWQgKHVybCkgewogICAgICB0aGlzLiRzZXQodGhpcy5wYXlsb2FkLCAnaW1hZ2VVUkwnLCB1cmwpCiAgICB9LAogICAgb25FdmlkZW5jZUltYWdlRmlsZUNoYW5nZWQgKGZpbGUpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMucGF5bG9hZCwgJ2ltYWdlRmlsZScsIGZpbGUpCiAgICB9LAoKICAgIGJlZm9yZVN1Ym1pdCAoKSB7CiAgICAgIHRoaXMuc2hvd1N1Ym1pc3Npb25EaWFsb2cgPSB0cnVlCiAgICB9LAoKICAgIG9uU3VibWlzc2lvblN1Y2Nlc3MgKCkgewogICAgICB0aGlzLm9uQ2xvc2VDb25maXJtYXRpb25EaWFsb2coKQogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL2RheW9mZicpCiAgICB9LAogICAgb25TdWJtaXNzaW9uRXJyb3IgKCkgewogICAgICB0aGlzLm9uQ2xvc2VDb25maXJtYXRpb25EaWFsb2coKQogICAgfSwKICAgIG9uQ2xvc2VDb25maXJtYXRpb25EaWFsb2cgKCkgewogICAgICB0aGlzLnNob3dTdWJtaXNzaW9uRGlhbG9nID0gZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/components/Attendance/DayoffForm","sourcesContent":["<template>\n  <ValidationObserver #default=\"{ handleSubmit }\">\n    <div class=\"dayoff-form\">\n\n      <!-- START: PERMIT TYPE INPUT -->\n      <div class=\"dayoff-form__input-segment\">\n        <RadioButtonGroup\n          name=\"permitsType\"\n          title=\"Jenis Izin\"\n          required\n          rules=\"required\"\n          :custom-messages=\"{\n            required: 'Jenis izin harus diisi'\n          }\"\n          :options=\"permitTypeOptions\"\n          v-model=\"payload.permitsType\"\n        />\n      </div>\n      <!-- END: PERMIT TYPE INPUT -->\n\n      <!-- START: START & END DATE INPUT -->\n      <div class=\"dayoff-form__input-segment\">\n        <InputHeader\n          label-for=\"startDate_endDate\"\n          title=\"Kapan izinnya\"\n          required/>\n        <div class=\"dayoff-form__start-end-date\">\n          <InputDateTime\n            name=\"startDate\"\n            type=\"date\"\n            :min-datetime=\"null\"\n            rules=\"required|date_compare:lte,@endDate\"\n            :custom-messages=\"{\n              required: 'Tanggal harus diisi',\n              date_compare: 'Tanggal mulai harus lebih dulu dari tanggal akhir'\n            }\"\n            placeholder=\"Tanggal Mulai\"\n            :value=\"startDateISOString\"\n            value-zone=\"UTC+7\"\n            @change=\"onStartDateChanged\"\n          />\n          <InputDateTime\n            name=\"endDate\"\n            type=\"date\"\n            :min-datetime=\"startDateISOString\"\n            rules=\"required\"\n            :custom-messages=\"{\n              required: 'Tanggal harus diisi'\n            }\"\n            placeholder=\"Tanggal Akhir\"\n            :value=\"endDateISOString\"\n            value-zone=\"UTC+7\"\n            @change=\"onEndDateChanged\"\n          />\n        </div>\n      </div>\n      <!-- END: START & END DATE INPUT -->\n\n      <!-- START: REASON INPUT -->\n      <ValidationObserver tag=\"div\" class=\"dayoff-form__input-segment\" #default=\"{ errors }\">\n        <InputHeader\n          label-for=\"startDate_endDate\"\n          title=\"Yuk kasih tau dulu\"\n          required/>\n        <ValidationProvider tag=\"p\"\n          class=\"dayoff-form__stakeholder-checkbox\"\n          :rules=\"{ required: { allowFalse: false }}\"\n          v-for=\"(ack, index) in permitAcknowledgmentOptions\" :key=\"index\"\n          @click.native.capture=\"onAcknowledgementOptionChecked(ack)\">\n          <input\n            multiple\n            type=\"checkbox\"\n            :name=\"`permitAcknowledge[${index}]`\"\n            :value=\"isAcknowledgementOptionChecked(ack)\"\n            :checked=\"isAcknowledgementOptionChecked(ack)\"/>\n          <label class=\"dark:text-white\">\n            {{ ack }}\n          </label>\n        </ValidationProvider>\n        <p v-if=\"isSomePermitAcknowledgementEmpty(errors)\"\n          class=\"form-input__error-hint mt-2\">\n          Oops, kamu belum ngasih tahu kesemua stakeholder.\n          <br>\n          Yuk kasih tahu dulu, lalu checklist formnya.\n        </p>\n      </ValidationObserver>\n      <div class=\"dayoff-form__input-segment\">\n        <InputTextarea\n          name=\"reason\"\n          rows=\"5\"\n          :placeholder=\"notePlaceholder\"\n          title=\"Alasan Izin\"\n          required\n          rules=\"required\"\n          :custom-messages=\"{\n            required: 'Alasan harus diisi'\n          }\"\n          v-model=\"payload.note\"\n        />\n      </div>\n      <!-- END: REASON INPUT -->\n\n      <!-- START: EVIDENCE INPUT -->\n      <div class=\"dayoff-form__input-segment\">\n        <EvidenceImageInput\n          ref=\"evidenceImageInput\"\n          name=\"evidence\"\n          title=\"Upload Evidence\"\n          rules=\"required|mimes:image/*|size:5120\"\n          accept=\"image/*\"\n          :custom-messages=\"{\n            required: 'Evidence harus diisi',\n            mimes: 'File harus berupa gambar',\n            size: 'Gambar tidak boleh lebih dari 5MB'\n          }\"\n          @change:url=\"onEvidenceImageURLChanged\"\n          @change:file=\"onEvidenceImageFileChanged\"\n        >\n          <template #subtitle>\n            <span class=\" text-gray-600\">\n              Misal: Foto/file surat dokter, chat izin ke koor/HR/rekan\n            </span>\n          </template>\n        </EvidenceImageInput>\n      </div>\n      <!-- END: EVIDENCE INPUT -->\n\n      <div class=\"dayoff-form__actions\">\n        <button class=\"dayoff-form__btn-cancel\" @click=\"onCancel\">\n          Batal\n        </button>\n        <button class=\"dayoff-form__btn-submit\" @click=\"handleSubmit(beforeSubmit)\">\n          Kirim\n        </button>\n      </div>\n    </div>\n    <Dialog :show=\"showSubmissionDialog\" max-width=\"480px\">\n      <Submission\n        v-bind=\"{ payload }\"\n        @success=\"onSubmissionSuccess\"\n        @error=\"onSubmissionError\"\n        @cancel=\"onCloseConfirmationDialog\"\n        @close=\"onCloseConfirmationDialog\"/>\n    </Dialog>\n  </ValidationObserver>\n</template>\n\n<script>\nimport _cloneDeep from 'lodash/cloneDeep'\nimport { PERMIT, STAKEHOLDER } from '../../../lib/constants'\n\nconst emptyPayload = {\n  permitsType: null,\n  permitAcknowledged: [],\n  startDate: null,\n  endDate: null,\n  note: null,\n  file: null,\n  imageFile: null,\n  imageURL: null\n}\n\nconst permitTypeOptions = [\n  PERMIT.SICK,\n  PERMIT.LEAVE,\n  PERMIT.PAID_LEAVE\n]\n\nconst permitAcknowledgmentOptions = [\n  STAKEHOLDER.STRUCTURAL,\n  STAKEHOLDER.HR,\n  STAKEHOLDER.COORDINATOR,\n  STAKEHOLDER.WORK_PARTNER\n]\n\nexport default {\n  components: {\n    Submission: () => import('./form-submission'),\n    Dialog: () => import('../../Dialog'),\n    InputHeader: () => import('../../Form/InputHeader'),\n    InputDateTime: () => import('../../Form/InputDateTime'),\n    InputTextarea: () => import('../../Form/Textarea'),\n    RadioButtonGroup: () => import('../../Form/RadioButtonGroup'),\n    EvidenceImageInput: () => import('../../Form/EvidenceImageInput')\n  },\n  data () {\n    return {\n      permitAcknowledgmentOptions: Object.freeze(permitAcknowledgmentOptions),\n      permitTypeOptions: Object.freeze(permitTypeOptions),\n      notePlaceholder: 'Ketikkan alasan izin kamu disini',\n\n      payload: _cloneDeep(emptyPayload),\n\n      showSubmissionDialog: false\n    }\n  },\n  computed: {\n    startDateISOString () {\n      const { startDate } = this.payload\n      return startDate instanceof Date ? startDate.toISOString() : null\n    },\n    endDateISOString () {\n      const { endDate } = this.payload\n      return endDate instanceof Date ? endDate.toISOString() : null\n    }\n  },\n  methods: {\n    onCancel () {\n      this.$router.replace({\n        path: '/dayoff'\n      })\n    },\n    isAcknowledgementOptionChecked (opt) {\n      return this.payload.permitAcknowledged.includes(opt)\n    },\n    onAcknowledgementOptionChecked (opt) {\n      let { permitAcknowledged } = this.payload\n      if (!Array.isArray(permitAcknowledged)) {\n        permitAcknowledged = []\n      }\n      if (this.isAcknowledgementOptionChecked(opt)) {\n        permitAcknowledged = permitAcknowledged.filter((ack) => ack !== opt)\n      } else {\n        permitAcknowledged.push(opt)\n      }\n      this.$set(this.payload, 'permitAcknowledged', permitAcknowledged)\n    },\n\n    isSomePermitAcknowledgementEmpty (validationObserverErrors) {\n      return validationObserverErrors && typeof validationObserverErrors === 'object' &&\n        Object.values(validationObserverErrors).some((arr) => Array.isArray(arr) && arr.length)\n    },\n\n    onStartDateChanged (date) {\n      if (date) {\n        this.$set(this.payload, 'startDate', new Date(date))\n      }\n    },\n    onEndDateChanged (date) {\n      if (date) {\n        this.$set(this.payload, 'endDate', new Date(date))\n      }\n    },\n\n    onEvidenceImageURLChanged (url) {\n      this.$set(this.payload, 'imageURL', url)\n    },\n    onEvidenceImageFileChanged (file) {\n      this.$set(this.payload, 'imageFile', file)\n    },\n\n    beforeSubmit () {\n      this.showSubmissionDialog = true\n    },\n\n    onSubmissionSuccess () {\n      this.onCloseConfirmationDialog()\n      this.$router.replace('/dayoff')\n    },\n    onSubmissionError () {\n      this.onCloseConfirmationDialog()\n    },\n    onCloseConfirmationDialog () {\n      this.showSubmissionDialog = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dayoff-form {\n\n  &__input-segment {\n    & + & {\n      margin-top: 1.5rem;\n    }\n  }\n\n  &__start-end-date {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n  }\n\n  &__stakeholder-checkbox {\n    > input {\n      @apply mr-2;\n    }\n  }\n\n  &__actions {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n    @apply mt-12;\n\n    > button {\n      @apply w-full\n      px-4 py-2\n      rounded;\n    }\n  }\n\n  &__btn-cancel {\n    @apply bg-gray-300\n    text-gray-700;\n\n    &:hover {\n      @apply bg-gray-400;\n    }\n  }\n\n  &__btn-submit {\n    @apply bg-blue-600\n    text-white;\n\n    &:hover {\n      @apply bg-blue-700;\n    }\n  }\n}\n</style>\n"]}]}