{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/AttendanceButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/AttendanceButton.vue","mtime":1673491775261},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfcmVzdWx0IGZyb20gJ2xvZGFzaC9yZXN1bHQnCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93U3Bpbm5lcjogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0NoZWNraW5TdGF0ZSAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVsnY2hlY2tpbnMtbGlzdCddLmlzQ2hlY2tpbgogICAgfSwKICAgIGlzQ2hlY2tvdXRTdGF0ZSAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVsnY2hlY2tpbnMtbGlzdCddLmlzQ2hlY2tvdXQKICAgIH0sCiAgICBpc0NoZWNraW5CdXR0b24gKCkgewogICAgICBpZiAodGhpcy5pc0NoZWNrb3V0U3RhdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5pc0NoZWNraW5TdGF0ZSA9PT0gZmFsc2UgfHwgKAogICAgICAgIHRoaXMuaXNDaGVja2luU3RhdGUgPT09IHRydWUgJiYKICAgICAgICB0aGlzLmlzQ2hlY2tvdXRTdGF0ZSA9PT0gdHJ1ZQogICAgICApCiAgICB9LAogICAgaXNDaGVja291dEJ1dHRvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzQ2hlY2tpblN0YXRlID09PSB0cnVlICYmIHRoaXMuaXNDaGVja291dFN0YXRlID09PSBmYWxzZQogICAgfSwKICAgIGJ1dHRvbkxhYmVsICgpIHsKICAgICAgaWYgKHRoaXMuaXNDaGVja2luQnV0dG9uKSB7CiAgICAgICAgcmV0dXJuICdDaGVja2luJwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNDaGVja291dEJ1dHRvbikgewogICAgICAgIHJldHVybiAnQ2hlY2tvdXQnCiAgICAgIH0KICAgICAgcmV0dXJuIG51bGwKICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQgKCkgewogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoZWNraW5zLWxpc3QvZ2V0Q2hlY2tpblN0YXRlJykKICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjaGVja2lucy1saXN0L2dldENoZWNrb3V0U3RhdGUnKQogIH0sCiAgbWV0aG9kczogewogICAgb25DbGljayAoKSB7CiAgICAgIGlmICh0aGlzLmlzQ2hlY2tpbkJ1dHRvbikgewogICAgICAgIHJldHVybiB0aGlzLmNoZWNraW4oKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNDaGVja291dEJ1dHRvbikgewogICAgICAgIHJldHVybiB0aGlzLmNoZWNrb3V0KCkKICAgICAgfQogICAgfSwKICAgIGNoZWNraW4gKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvY2hlY2tpbnMvY3JlYXRlJwogICAgICB9KQogICAgfSwKICAgIGFzeW5jIGNoZWNrb3V0ICgpIHsKICAgICAgY29uc3QgeyB2YWx1ZTogY29uZmlybSB9ID0gYXdhaXQgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICB0ZXh0OiAnQXBhIGthbXUgeWFraW4gdW50dWsgY2hlY2tvdXQgc2VrYXJhbmc/JywKICAgICAgICBpY29uOiAncXVlc3Rpb24nLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnWWEsIGNoZWNrb3V0IHNla2FyYW5nJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnVGlkYWsnLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnIzgwODA4MCcsCiAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICdibHVlJwogICAgICB9KQogICAgICBpZiAoIWNvbmZpcm0pIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0cnkgewogICAgICAgIHRoaXMuc2hvd1NwaW5uZXIgPSB0cnVlCiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoZWNraW5zLWxpc3QvY2hlY2tvdXQnLCB7CiAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpCiAgICAgICAgfSkKICAgICAgICBhd2FpdCB0aGlzLiRzd2FsLmZpcmUoewogICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgdGl0bGU6ICdUZXJpbWFrYXNpaCBidWF0IGtvbnRyaWJ1c2lueWEgaGFyaSBpbmkgeWEnLAogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdPSycKICAgICAgICB9KQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc3QgbWVzc2FnZSA9IF9yZXN1bHQoZSwgJ3Jlc3BvbnNlLmRhdGEubWVzc2FnZScpIHx8IF9yZXN1bHQoZSwgJ3N0YWNrJykgfHwgJycKICAgICAgICB0aGlzLiRzd2FsLmZpcmUoewogICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1R1dHVwJwogICAgICAgIH0pCiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5zaG93U3Bpbm5lciA9IGZhbHNlCiAgICAgIH0KICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJzLWRhc2hib2FyZC9nZXREYXNoYm9hcmRSZXBvcnRVc2VyJykKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoZWNraW5zLWxpc3QvZ2V0Q2hlY2tpblN0YXRlJywgeyByZWZyZXNoOiB0cnVlIH0pCiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjaGVja2lucy1saXN0L2dldENoZWNrb3V0U3RhdGUnLCB7IHJlZnJlc2g6IHRydWUgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["AttendanceButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AttendanceButton.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div v-show=\"isCheckinButton || isCheckoutButton\">\n    <button\n      :class=\"{\n        'btn-attendance': true,\n        'btn-attendance--checkin': isCheckinButton,\n        'btn-attendance--checkout': isCheckoutButton,\n        'btn-attendance--spinner': showSpinner\n      }\"\n      @click=\"onClick\">\n    <img\n      v-if=\"showSpinner\"\n      src=\"@/assets/loading.gif\"\n      class=\"inline-block w-auto object-contain object-center\"\n      style=\"height: 24px;\">\n    <span v-else>\n      {{ buttonLabel }}\n    </span>\n  </button>\n  </div>\n</template>\n\n<script>\nimport _result from 'lodash/result'\n\nexport default {\n  data () {\n    return {\n      showSpinner: false\n    }\n  },\n  computed: {\n    isCheckinState () {\n      return this.$store.state['checkins-list'].isCheckin\n    },\n    isCheckoutState () {\n      return this.$store.state['checkins-list'].isCheckout\n    },\n    isCheckinButton () {\n      if (this.isCheckoutState) {\n        return false\n      }\n      return this.isCheckinState === false || (\n        this.isCheckinState === true &&\n        this.isCheckoutState === true\n      )\n    },\n    isCheckoutButton () {\n      return this.isCheckinState === true && this.isCheckoutState === false\n    },\n    buttonLabel () {\n      if (this.isCheckinButton) {\n        return 'Checkin'\n      } else if (this.isCheckoutButton) {\n        return 'Checkout'\n      }\n      return null\n    }\n  },\n  async created () {\n    await this.$store.dispatch('checkins-list/getCheckinState')\n    await this.$store.dispatch('checkins-list/getCheckoutState')\n  },\n  methods: {\n    onClick () {\n      if (this.isCheckinButton) {\n        return this.checkin()\n      } else if (this.isCheckoutButton) {\n        return this.checkout()\n      }\n    },\n    checkin () {\n      return this.$router.push({\n        path: '/checkins/create'\n      })\n    },\n    async checkout () {\n      const { value: confirm } = await this.$swal.fire({\n        text: 'Apa kamu yakin untuk checkout sekarang?',\n        icon: 'question',\n        confirmButtonText: 'Ya, checkout sekarang',\n        cancelButtonText: 'Tidak',\n        showConfirmButton: true,\n        showCancelButton: true,\n        confirmButtonColor: '#808080',\n        cancelButtonColor: 'blue'\n      })\n      if (!confirm) {\n        return\n      }\n      try {\n        this.showSpinner = true\n        await this.$store.dispatch('checkins-list/checkout', {\n          date: new Date()\n        })\n        await this.$swal.fire({\n          icon: 'success',\n          title: 'Terimakasih buat kontribusinya hari ini ya',\n          confirmButtonText: 'OK'\n        })\n      } catch (e) {\n        const message = _result(e, 'response.data.message') || _result(e, 'stack') || ''\n        this.$swal.fire({\n          icon: 'error',\n          text: message,\n          confirmButtonText: 'Tutup'\n        })\n      } finally {\n        this.showSpinner = false\n      }\n      await this.$store.dispatch('users-dashboard/getDashboardReportUser')\n      await this.$store.dispatch('checkins-list/getCheckinState', { refresh: true })\n      await this.$store.dispatch('checkins-list/getCheckoutState', { refresh: true })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.btn-attendance {\n  @apply block w-full px-4 py-2 rounded text-white;\n\n  &--checkin {\n    @apply bg-green-600;\n\n    &:hover {\n      @apply bg-green-500;\n    }\n  }\n\n  &--checkout {\n    @apply bg-red-500;\n\n    &:hover {\n      @apply bg-red-400;\n    }\n  }\n\n  &--spinner {\n    @apply bg-white text-transparent;\n  }\n\n  &:focus,\n  &:active {\n    @apply outline-none;\n  }\n}\n</style>\n"]}]}