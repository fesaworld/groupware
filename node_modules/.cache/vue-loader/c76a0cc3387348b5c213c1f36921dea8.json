{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Attendance/DayoffForm/form.vue?vue&type=style&index=0&id=0b39b806&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Attendance/DayoffForm/form.vue","mtime":1673491775260},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/css-loader/dist/cjs.js","mtime":1673491970692},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673491936529},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/postcss-loader/src/index.js","mtime":1673491966590},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/sass-loader/dist/cjs.js","mtime":1673491959555},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmRheW9mZi1mb3JtIHsKCiAgJl9faW5wdXQtc2VnbWVudCB7CiAgICAmICsgJiB7CiAgICAgIG1hcmdpbi10b3A6IDEuNXJlbTsKICAgIH0KICB9CgogICZfX3N0YXJ0LWVuZC1kYXRlIHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOwogICAgZ2FwOiAxcmVtOwogIH0KCiAgJl9fc3Rha2Vob2xkZXItY2hlY2tib3ggewogICAgPiBpbnB1dCB7CiAgICAgIEBhcHBseSBtci0yOwogICAgfQogIH0KCiAgJl9fYWN0aW9ucyB7CiAgICBkaXNwbGF5OiBncmlkOwogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsKICAgIGdhcDogMXJlbTsKICAgIEBhcHBseSBtdC0xMjsKCiAgICA+IGJ1dHRvbiB7CiAgICAgIEBhcHBseSB3LWZ1bGwKICAgICAgcHgtNCBweS0yCiAgICAgIHJvdW5kZWQ7CiAgICB9CiAgfQoKICAmX19idG4tY2FuY2VsIHsKICAgIEBhcHBseSBiZy1ncmF5LTMwMAogICAgdGV4dC1ncmF5LTcwMDsKCiAgICAmOmhvdmVyIHsKICAgICAgQGFwcGx5IGJnLWdyYXktNDAwOwogICAgfQogIH0KCiAgJl9fYnRuLXN1Ym1pdCB7CiAgICBAYXBwbHkgYmctYmx1ZS02MDAKICAgIHRleHQtd2hpdGU7CgogICAgJjpob3ZlciB7CiAgICAgIEBhcHBseSBiZy1ibHVlLTcwMDsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/components/Attendance/DayoffForm","sourcesContent":["<template>\n  <ValidationObserver #default=\"{ handleSubmit }\">\n    <div class=\"dayoff-form\">\n\n      <!-- START: PERMIT TYPE INPUT -->\n      <div class=\"dayoff-form__input-segment\">\n        <RadioButtonGroup\n          name=\"permitsType\"\n          title=\"Jenis Izin\"\n          required\n          rules=\"required\"\n          :custom-messages=\"{\n            required: 'Jenis izin harus diisi'\n          }\"\n          :options=\"permitTypeOptions\"\n          v-model=\"payload.permitsType\"\n        />\n      </div>\n      <!-- END: PERMIT TYPE INPUT -->\n\n      <!-- START: START & END DATE INPUT -->\n      <div class=\"dayoff-form__input-segment\">\n        <InputHeader\n          label-for=\"startDate_endDate\"\n          title=\"Kapan izinnya\"\n          required/>\n        <div class=\"dayoff-form__start-end-date\">\n          <InputDateTime\n            name=\"startDate\"\n            type=\"date\"\n            :min-datetime=\"null\"\n            rules=\"required|date_compare:lte,@endDate\"\n            :custom-messages=\"{\n              required: 'Tanggal harus diisi',\n              date_compare: 'Tanggal mulai harus lebih dulu dari tanggal akhir'\n            }\"\n            placeholder=\"Tanggal Mulai\"\n            :value=\"startDateISOString\"\n            value-zone=\"UTC+7\"\n            @change=\"onStartDateChanged\"\n          />\n          <InputDateTime\n            name=\"endDate\"\n            type=\"date\"\n            :min-datetime=\"startDateISOString\"\n            rules=\"required\"\n            :custom-messages=\"{\n              required: 'Tanggal harus diisi'\n            }\"\n            placeholder=\"Tanggal Akhir\"\n            :value=\"endDateISOString\"\n            value-zone=\"UTC+7\"\n            @change=\"onEndDateChanged\"\n          />\n        </div>\n      </div>\n      <!-- END: START & END DATE INPUT -->\n\n      <!-- START: REASON INPUT -->\n      <ValidationObserver tag=\"div\" class=\"dayoff-form__input-segment\" #default=\"{ errors }\">\n        <InputHeader\n          label-for=\"startDate_endDate\"\n          title=\"Yuk kasih tau dulu\"\n          required/>\n        <ValidationProvider tag=\"p\"\n          class=\"dayoff-form__stakeholder-checkbox\"\n          :rules=\"{ required: { allowFalse: false }}\"\n          v-for=\"(ack, index) in permitAcknowledgmentOptions\" :key=\"index\"\n          @click.native.capture=\"onAcknowledgementOptionChecked(ack)\">\n          <input\n            multiple\n            type=\"checkbox\"\n            :name=\"`permitAcknowledge[${index}]`\"\n            :value=\"isAcknowledgementOptionChecked(ack)\"\n            :checked=\"isAcknowledgementOptionChecked(ack)\"/>\n          <label class=\"dark:text-white\">\n            {{ ack }}\n          </label>\n        </ValidationProvider>\n        <p v-if=\"isSomePermitAcknowledgementEmpty(errors)\"\n          class=\"form-input__error-hint mt-2\">\n          Oops, kamu belum ngasih tahu kesemua stakeholder.\n          <br>\n          Yuk kasih tahu dulu, lalu checklist formnya.\n        </p>\n      </ValidationObserver>\n      <div class=\"dayoff-form__input-segment\">\n        <InputTextarea\n          name=\"reason\"\n          rows=\"5\"\n          :placeholder=\"notePlaceholder\"\n          title=\"Alasan Izin\"\n          required\n          rules=\"required\"\n          :custom-messages=\"{\n            required: 'Alasan harus diisi'\n          }\"\n          v-model=\"payload.note\"\n        />\n      </div>\n      <!-- END: REASON INPUT -->\n\n      <!-- START: EVIDENCE INPUT -->\n      <div class=\"dayoff-form__input-segment\">\n        <EvidenceImageInput\n          ref=\"evidenceImageInput\"\n          name=\"evidence\"\n          title=\"Upload Evidence\"\n          rules=\"required|mimes:image/*|size:5120\"\n          accept=\"image/*\"\n          :custom-messages=\"{\n            required: 'Evidence harus diisi',\n            mimes: 'File harus berupa gambar',\n            size: 'Gambar tidak boleh lebih dari 5MB'\n          }\"\n          @change:url=\"onEvidenceImageURLChanged\"\n          @change:file=\"onEvidenceImageFileChanged\"\n        >\n          <template #subtitle>\n            <span class=\" text-gray-600\">\n              Misal: Foto/file surat dokter, chat izin ke koor/HR/rekan\n            </span>\n          </template>\n        </EvidenceImageInput>\n      </div>\n      <!-- END: EVIDENCE INPUT -->\n\n      <div class=\"dayoff-form__actions\">\n        <button class=\"dayoff-form__btn-cancel\" @click=\"onCancel\">\n          Batal\n        </button>\n        <button class=\"dayoff-form__btn-submit\" @click=\"handleSubmit(beforeSubmit)\">\n          Kirim\n        </button>\n      </div>\n    </div>\n    <Dialog :show=\"showSubmissionDialog\" max-width=\"480px\">\n      <Submission\n        v-bind=\"{ payload }\"\n        @success=\"onSubmissionSuccess\"\n        @error=\"onSubmissionError\"\n        @cancel=\"onCloseConfirmationDialog\"\n        @close=\"onCloseConfirmationDialog\"/>\n    </Dialog>\n  </ValidationObserver>\n</template>\n\n<script>\nimport _cloneDeep from 'lodash/cloneDeep'\nimport { PERMIT, STAKEHOLDER } from '../../../lib/constants'\n\nconst emptyPayload = {\n  permitsType: null,\n  permitAcknowledged: [],\n  startDate: null,\n  endDate: null,\n  note: null,\n  file: null,\n  imageFile: null,\n  imageURL: null\n}\n\nconst permitTypeOptions = [\n  PERMIT.SICK,\n  PERMIT.LEAVE,\n  PERMIT.PAID_LEAVE\n]\n\nconst permitAcknowledgmentOptions = [\n  STAKEHOLDER.STRUCTURAL,\n  STAKEHOLDER.HR,\n  STAKEHOLDER.COORDINATOR,\n  STAKEHOLDER.WORK_PARTNER\n]\n\nexport default {\n  components: {\n    Submission: () => import('./form-submission'),\n    Dialog: () => import('../../Dialog'),\n    InputHeader: () => import('../../Form/InputHeader'),\n    InputDateTime: () => import('../../Form/InputDateTime'),\n    InputTextarea: () => import('../../Form/Textarea'),\n    RadioButtonGroup: () => import('../../Form/RadioButtonGroup'),\n    EvidenceImageInput: () => import('../../Form/EvidenceImageInput')\n  },\n  data () {\n    return {\n      permitAcknowledgmentOptions: Object.freeze(permitAcknowledgmentOptions),\n      permitTypeOptions: Object.freeze(permitTypeOptions),\n      notePlaceholder: 'Ketikkan alasan izin kamu disini',\n\n      payload: _cloneDeep(emptyPayload),\n\n      showSubmissionDialog: false\n    }\n  },\n  computed: {\n    startDateISOString () {\n      const { startDate } = this.payload\n      return startDate instanceof Date ? startDate.toISOString() : null\n    },\n    endDateISOString () {\n      const { endDate } = this.payload\n      return endDate instanceof Date ? endDate.toISOString() : null\n    }\n  },\n  methods: {\n    onCancel () {\n      this.$router.replace({\n        path: '/dayoff'\n      })\n    },\n    isAcknowledgementOptionChecked (opt) {\n      return this.payload.permitAcknowledged.includes(opt)\n    },\n    onAcknowledgementOptionChecked (opt) {\n      let { permitAcknowledged } = this.payload\n      if (!Array.isArray(permitAcknowledged)) {\n        permitAcknowledged = []\n      }\n      if (this.isAcknowledgementOptionChecked(opt)) {\n        permitAcknowledged = permitAcknowledged.filter((ack) => ack !== opt)\n      } else {\n        permitAcknowledged.push(opt)\n      }\n      this.$set(this.payload, 'permitAcknowledged', permitAcknowledged)\n    },\n\n    isSomePermitAcknowledgementEmpty (validationObserverErrors) {\n      return validationObserverErrors && typeof validationObserverErrors === 'object' &&\n        Object.values(validationObserverErrors).some((arr) => Array.isArray(arr) && arr.length)\n    },\n\n    onStartDateChanged (date) {\n      if (date) {\n        this.$set(this.payload, 'startDate', new Date(date))\n      }\n    },\n    onEndDateChanged (date) {\n      if (date) {\n        this.$set(this.payload, 'endDate', new Date(date))\n      }\n    },\n\n    onEvidenceImageURLChanged (url) {\n      this.$set(this.payload, 'imageURL', url)\n    },\n    onEvidenceImageFileChanged (file) {\n      this.$set(this.payload, 'imageFile', file)\n    },\n\n    beforeSubmit () {\n      this.showSubmissionDialog = true\n    },\n\n    onSubmissionSuccess () {\n      this.onCloseConfirmationDialog()\n      this.$router.replace('/dayoff')\n    },\n    onSubmissionError () {\n      this.onCloseConfirmationDialog()\n    },\n    onCloseConfirmationDialog () {\n      this.showSubmissionDialog = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dayoff-form {\n\n  &__input-segment {\n    & + & {\n      margin-top: 1.5rem;\n    }\n  }\n\n  &__start-end-date {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n  }\n\n  &__stakeholder-checkbox {\n    > input {\n      @apply mr-2;\n    }\n  }\n\n  &__actions {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n    @apply mt-12;\n\n    > button {\n      @apply w-full\n      px-4 py-2\n      rounded;\n    }\n  }\n\n  &__btn-cancel {\n    @apply bg-gray-300\n    text-gray-700;\n\n    &:hover {\n      @apply bg-gray-400;\n    }\n  }\n\n  &__btn-submit {\n    @apply bg-blue-600\n    text-white;\n\n    &:hover {\n      @apply bg-blue-700;\n    }\n  }\n}\n</style>\n"]}]}