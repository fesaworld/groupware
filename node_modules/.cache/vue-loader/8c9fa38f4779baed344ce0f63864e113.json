{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Attendance/CheckinForm/form.vue?vue&type=style&index=0&id=64793a08&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/src/components/Attendance/CheckinForm/form.vue","mtime":1673512170561},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/css-loader/dist/cjs.js","mtime":1673491970692},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673491936529},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/postcss-loader/src/index.js","mtime":1673491966590},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/sass-loader/dist/cjs.js","mtime":1673491959555},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY2hlY2tpbi1mb3JtIHsKICAmX19kYXRlIHsKICAgIEBhcHBseSBibG9jayBtYi04IHRleHQtbGcgZm9udC1ib2xkOwogIH0KCiAgJl9faG91ci1taW4gewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsIDFmcik7CiAgICBnYXA6IDFyZW07CiAgfQoKICAmX19pbnB1dC1zZWdtZW50IHsKICAgICYgKyAmIHsKICAgICAgbWFyZ2luLXRvcDogMS41cmVtOwogICAgfQogIH0KCiAgJl9fYnRuLXN1Ym1pdCB7CiAgICBAYXBwbHkgdy1mdWxsIG10LTEyCiAgICBweC00IHB5LTIKICAgIHJvdW5kZWQKICAgIGJnLWJsdWUtNjAwCiAgICB0ZXh0LXdoaXRlOwoKICAgICY6aG92ZXIgewogICAgICBAYXBwbHkgYmctYmx1ZS03MDA7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/components/Attendance/CheckinForm","sourcesContent":["<template>\n  <ValidationObserver #default=\"{ handleSubmit }\">\n    <div class=\"checkin-form\">\n      <span class=\"checkin-form__date text-gray-600 dark:text-gray-300\">\n        {{ todayDateString }}\n      </span>\n      <!-- START: CHECKIN HOUR AND MINUTE INPUT -->\n      <div class=\"checkin-form__input-segment\" v-if=\"user.manager_category!='Tim Pengelola Layanan Digital'\">\n        <InputHeader\n          label-for=\"checkinHour_checkinMinute\"\n          title=\"Jam Kehadiran\"\n        />\n        <div class=\"checkin-form__hour-min\">\n          <p class=\"text-gray-600 dark:text-gray-300\">Jam</p>\n          <p class=\"text-gray-600 dark:text-gray-300\">Menit</p>\n          <Input disabled\n            name=\"checkinHour\"\n            :value=\"checkinHour\"\n            />\n          <Input disabled\n            name=\"checkinMinute\"\n            :value=\"checkinMinute\"\n            />\n        </div>\n      </div>\n      <div class=\"checkin-form__input-segment\" v-else>\n        <InputHeader\n          label-for=\"checkinHour_checkinMinute\"\n          title=\"Jam Kehadiran\"\n        />\n        <div class=\"checkin-form__hour-min\">\n          <InputSelect\n            name=\"checkinHour\"\n            :options=\"hourOptions\"\n            :value=\"checkinHour\"\n            rules=\"required\"\n            prompt=\"Jam\"\n            @change=\"onCheckinHourChanged\"\n            />\n          <InputSelect\n            name=\"checkinMinute\"\n            :options=\"minuteOptions\"\n            :value=\"checkinMinute\"\n            rules=\"required\"\n            prompt=\"Menit\"\n            @change=\"onCheckinMinuteChanged\"\n            />\n        </div>\n      </div>\n      <!-- END: CHECKIN HOUR AND MINUTE INPUT -->\n\n      <!-- START: LOCATION INPUT -->\n      <div class=\"checkin-form__input-segment\">\n        <RadioButtonGroup\n          class=\"mb-2\"\n          name=\"location\"\n          title=\"Jenis Kehadiran\"\n          rules=\"required\"\n          :disabled=\"false\"\n          :block=\"true\"\n          :options=\"locationOptions\"\n          :custom-messages=\"{\n            required: 'Jenis kehadiran harus diisi'\n          }\"\n          v-model=\"payload.location\"\n        >\n          <template #subtitle>\n            <span class=\"italic text-gray-500\">\n              Pilih salah satu\n            </span>\n          </template>\n        </RadioButtonGroup>\n      </div>\n      <!-- END: LOCATION INPUT -->\n\n      <div class=\"checkin-form__input-segment\">\n        <MoodInput\n          class=\"mb-12\"\n          name=\"mood\"\n          v-model=\"payload.mood\"\n        />\n      </div>\n\n      <!-- START: NOTE INPUT -->\n      <div class=\"checkin-form__input-segment\">\n        <InputTextarea\n          name=\"note\"\n          rows=\"5\"\n          title=\"Catatan Agenda\"\n          :required=\"false\"\n          :placeholder=\"notePlaceholder\"\n          v-model=\"payload.note\"\n          />\n      </div>\n      <!-- END: NOTE INPUT -->\n    </div>\n    <button class=\"checkin-form__btn-submit\" @click=\"handleSubmit(beforeSubmit)\">\n      Kirim\n    </button>\n\n    <Dialog :show=\"showSubmissionDialog\">\n      <Submission\n        v-if=\"showSubmissionDialog\"\n        v-bind=\"{ payload }\"\n        @success=\"onSubmissionSuccess\"\n        @error=\"onSubmissionError\"\n        @cancel=\"onCloseConfirmationDialog\"\n        @close=\"onCloseConfirmationDialog\"/>\n    </Dialog>\n  </ValidationObserver>\n</template>\n\n<script>\nimport _cloneDeep from 'lodash/cloneDeep'\nimport setHours from 'date-fns/setHours'\nimport setMinutes from 'date-fns/setMinutes'\nimport { formatDateLong } from '../../../lib/date'\nimport { ATTENDANCE } from '../../../lib/constants'\nimport MoodInput from './mood-input'\nimport { mapGetters } from 'vuex'\n\nconst LOCATION = {\n  WFH: 'WFH',\n  WFO: 'WFO',\n  PERJADIN: 'PERJADIN'\n}\n\nconst hourOptions = new Array(24).fill(null).map((_, n) => {\n  return n < 10 ? `0${n}` : `${n}`\n})\n\nconst minuteOptions = new Array(60 / 5).fill(null).map((_, n) => {\n  return (n < 10 / 5) ? `0${n * 5}` : `${n * 5}`\n})\n\nconst locationOptions = [\n  LOCATION.WFH,\n  LOCATION.WFO,\n  LOCATION.PERJADIN\n]\n\nconst emptyPayload = {\n  date: null,\n  location: null,\n  message: ATTENDANCE.PRESENT,\n  note: null,\n  mood: null\n}\n\nexport default {\n  components: {\n    MoodInput,\n    InputHeader: () => import('../../Form/InputHeader'),\n    Input: () => import('../../Form/Input'),\n    InputSelect: () => import('../../Form/Select'),\n    InputTextarea: () => import('../../Form/Textarea'),\n    RadioButtonGroup: () => import('../../Form/RadioButtonGroup'),\n    Dialog: () => import('../../Dialog'),\n    Submission: () => import('./form-submission')\n  },\n  computed: mapGetters({\n    // authLoading: 'auth/loading'\n    user: 'auth/user'\n  }),\n  data () {\n    return {\n      todayDateString: formatDateLong(new Date()),\n      hourOptions: Object.freeze(hourOptions),\n      minuteOptions: Object.freeze(minuteOptions),\n      locationOptions: Object.freeze(locationOptions),\n\n      checkinHour: null,\n      checkinMinute: null,\n      notePlaceholder: 'Ketikkan lokasi kerja kamu/agenda kamu hari ini/pesan penyemangat untuk teman-teman kamu disini',\n      payload: _cloneDeep(emptyPayload),\n\n      showSubmissionDialog: false\n    }\n  },\n  beforeMount () {\n    this.getCurrentHourAndMinute()\n  },\n  methods: {\n    formatDateLong (date) {\n      return date ? formatDateLong(date) : null\n    },\n\n    /**\n     * get current hour,\n     * get current minute to the nearest multiplication of 5,\n     * set current hour and minute to checkinHour and checkinMinute\n    */\n    getCurrentHourAndMinute () {\n      const today = new Date()\n      let currentHour = today.getHours()\n\n      let currentMinute = Math.round(today.getMinutes() / 5) * 5\n      if (currentMinute < 10) {\n        currentMinute = `0${currentMinute}`\n      } else if (currentMinute === 60) {\n        currentMinute = '00'\n        currentHour += 1\n      } else {\n        currentMinute = currentMinute.toString()\n      }\n\n      if (currentHour < 10) {\n        currentHour = `0${currentHour}`\n      }\n      this.checkinHour = currentHour\n      this.checkinMinute = currentMinute\n      this.updateCheckinDatePayload({\n        hour: currentHour,\n        min: currentMinute\n      })\n    },\n    updateCheckinDatePayload ({ hour, min }) {\n      let { date } = this.payload\n      if (date instanceof Date === false) {\n        date = new Date()\n      }\n      if (hour) {\n        date = setHours(date, hour)\n      }\n      if (min) {\n        date = setMinutes(date, min)\n      }\n      this.$set(this.payload, 'date', date)\n    },\n    onCheckinHourChanged (hour) {\n      this.checkinHour = hour\n      this.updateCheckinDatePayload({ hour })\n    },\n    onCheckinMinuteChanged (min) {\n      this.checkinMinute = min\n      this.updateCheckinDatePayload({ min })\n    },\n\n    beforeSubmit () {\n      this.showSubmissionDialog = true\n    },\n\n    onSubmissionSuccess () {\n      this.onCloseConfirmationDialog()\n      this.$router.push('/checkins')\n    },\n    onSubmissionError (/* err */) {\n      this.onCloseConfirmationDialog()\n    },\n    onCloseConfirmationDialog () {\n      this.showSubmissionDialog = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.checkin-form {\n  &__date {\n    @apply block mb-8 text-lg font-bold;\n  }\n\n  &__hour-min {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n  }\n\n  &__input-segment {\n    & + & {\n      margin-top: 1.5rem;\n    }\n  }\n\n  &__btn-submit {\n    @apply w-full mt-12\n    px-4 py-2\n    rounded\n    bg-blue-600\n    text-white;\n\n    &:hover {\n      @apply bg-blue-700;\n    }\n  }\n}\n</style>\n"]}]}