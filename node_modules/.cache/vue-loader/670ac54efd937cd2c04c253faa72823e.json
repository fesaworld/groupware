{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/LogbookList/table.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/LogbookList/table.vue","mtime":1673745153935},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJy4uL1BhZ2luYXRpb24nCmltcG9ydCBsaXN0TWl4aW4gZnJvbSAnLi9saXN0LW1peGluJwppbXBvcnQgVGFibGVGaWx0ZXIgZnJvbSAnLi90YWJsZS1maWx0ZXInCmltcG9ydCBUYWJsZVJvdyBmcm9tICcuL3RhYmxlLXJvdycKaW1wb3J0IF9pc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dib29rVGFibGUnLAogIG1peGluczogW2xpc3RNaXhpbl0sCiAgY29tcG9uZW50czogewogICAgUGFnaW5hdGlvbiwKICAgIFRhYmxlRmlsdGVyLAogICAgVGFibGVSb3cKICB9LAogIHByb3BzOiB7CiAgICBxdWVyeTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IG51bGwKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nTG9nYm9va0xpc3Q6IHRydWUsCiAgICAgIGxvZ2Jvb2tMaXN0RXJyb3I6IG51bGwsCiAgICAgIGxvZ2Jvb2tMaXN0RGF0YTogbnVsbCwKICAgICAgdG90YWxQYWdlOiAwLAogICAgICB0b3RhbENvdW50OiAwLAoKICAgICAgbVF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBwZXJQYWdlOiAxMCwKICAgICAgICBzdGFydERhdGU6IG51bGwsCiAgICAgICAgZW5kRGF0ZTogbnVsbAogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdGFibGVGaWx0ZXIgKCkgewogICAgICByZXR1cm4gewogICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5tUXVlcnkuc3RhcnREYXRlLAogICAgICAgIGVuZERhdGU6IHRoaXMubVF1ZXJ5LmVuZERhdGUsCiAgICAgICAgcGVyUGFnZTogdGhpcy5tUXVlcnkucGVyUGFnZQogICAgICB9CiAgICB9LAogICAgaXNDaGVja2luU3RhdGUgKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGVbJ2NoZWNraW5zLWxpc3QnXS5pc0NoZWNraW4KICAgIH0sCiAgICBzdGFydEluZGV4ICgpIHsKICAgICAgaWYgKHRoaXMudG90YWxDb3VudCkgewogICAgICAgIHJldHVybiAodGhpcy5tUXVlcnkucGFnZSAtIDEpICogKHRoaXMubVF1ZXJ5LnBlclBhZ2UpCiAgICAgIH0KICAgICAgcmV0dXJuIDAKICAgIH0sCiAgICBlbmRJbmRleCAoKSB7CiAgICAgIGlmICh0aGlzLnRvdGFsQ291bnQpIHsKICAgICAgICBpZiAodGhpcy5tUXVlcnkucGFnZSA9PT0gTWF0aC5jZWlsKHRoaXMudG90YWxDb3VudCAvIHRoaXMubVF1ZXJ5LnBlclBhZ2UpKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbENvdW50IC0gMQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydEluZGV4ICsgdGhpcy5sb2dib29rTGlzdERhdGEubGVuZ3RoIC0gMQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gMAogICAgfSwKICAgIHBhZ2luYXRpb24gKCkgewogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlOiB0aGlzLm1RdWVyeS5wYWdlLAogICAgICAgIHBhZ2VDb3VudDogdGhpcy50b3RhbFBhZ2UsCiAgICAgICAgcGFnZVJhbmdlOiAzLAogICAgICAgIGNsaWNrSGFuZGxlcjogdGhpcy5vblBhZ2VDaGFuZ2VkLAogICAgICAgIGZpcnN0TGFzdEJ1dHRvbjogdHJ1ZQogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcXVlcnk6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyIChuZXdPYmplY3QsIG9sZE9iamVjdCkgewogICAgICAgIGlmIChfaXNFcXVhbChuZXdPYmplY3QsIG9sZE9iamVjdCkpIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgY29uc3QgewogICAgICAgICAgcGFnZSA9IDEsCiAgICAgICAgICBwZXJQYWdlID0gMTAsCiAgICAgICAgICBzdGFydERhdGUgPSBudWxsLAogICAgICAgICAgZW5kRGF0ZSA9IG51bGwKICAgICAgICB9ID0gKG5ld09iamVjdCB8fCB7fSkKICAgICAgICB0aGlzLnVwZGF0ZVF1ZXJ5KHsKICAgICAgICAgIHBhZ2UsCiAgICAgICAgICBwZXJQYWdlLAogICAgICAgICAgc3RhcnREYXRlLAogICAgICAgICAgZW5kRGF0ZQogICAgICAgIH0sIHsKICAgICAgICAgIHN5bmM6IGZhbHNlCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlUXVlcnkgKHsKICAgICAgcGFnZSwKICAgICAgcGVyUGFnZSwKICAgICAgc3RhcnREYXRlLAogICAgICBlbmREYXRlCiAgICB9LCB7CiAgICAgIHN5bmMgPSB0cnVlCiAgICB9ID0ge30pIHsKICAgICAgdGhpcy5tUXVlcnkgPSB7CiAgICAgICAgcGFnZSwKICAgICAgICBwZXJQYWdlLAogICAgICAgIHN0YXJ0RGF0ZSwKICAgICAgICBlbmREYXRlCiAgICAgIH0KICAgICAgaWYgKHN5bmMpIHsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6cXVlcnknLCB0aGlzLm1RdWVyeSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxvYWREYXRhKCkKICAgICAgfQogICAgfSwKICAgIGdldFF1ZXJ5QXNBUElTcGVjICgpIHsKICAgICAgY29uc3QgeyBwYWdlLCBwZXJQYWdlLCBzdGFydERhdGUsIGVuZERhdGUgfSA9IHRoaXMubVF1ZXJ5CiAgICAgIHJldHVybiB7CiAgICAgICAgcGFnZSwKICAgICAgICBwYWdlU2l6ZTogcGVyUGFnZSwKICAgICAgICBzdGFydF9kYXRlOiBzdGFydERhdGUsCiAgICAgICAgZW5kX2RhdGU6IGVuZERhdGUKICAgICAgfQogICAgfSwKICAgIG9uRmlsdGVyQ2hhbmdlZCAoeyBzdGFydERhdGUsIGVuZERhdGUsIHBlclBhZ2UgfSA9IHt9KSB7CiAgICAgIHRoaXMudXBkYXRlUXVlcnkoewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc3RhcnREYXRlLAogICAgICAgIGVuZERhdGUsCiAgICAgICAgcGVyUGFnZQogICAgICB9KQogICAgICB0aGlzLnRvdGFsQ291bnQgPSAwCiAgICAgIHRoaXMudG90YWxQYWdlID0gMAogICAgfSwKICAgIG9uUGFnZUNoYW5nZWQgKG5ld1BhZ2UpIHsKICAgICAgdGhpcy51cGRhdGVRdWVyeSh7CiAgICAgICAgLi4udGhpcy5tUXVlcnksCiAgICAgICAgcGFnZTogbmV3UGFnZQogICAgICB9KQogICAgfSwKICAgIG9uTG9hZFN1Y2Nlc3MgKHsgcmVzdWx0cywgX21ldGEgfSkgewogICAgICBjb25zdCB7IHRvdGFsUGFnZSwgdG90YWxDb3VudCB9ID0gX21ldGEKICAgICAgdGhpcy50b3RhbFBhZ2UgPSB0b3RhbFBhZ2UKICAgICAgdGhpcy50b3RhbENvdW50ID0gdG90YWxDb3VudAogICAgICB0aGlzLmxvZ2Jvb2tMaXN0RGF0YSA9IHJlc3VsdHMKICAgIH0sCiAgICBvbkxvYWRFcnJvciAoZXJyKSB7CiAgICAgIHRoaXMubG9nYm9va0xpc3RFcnJvciA9IGVycgogICAgfSwKICAgIG9uTG9hZEZpbmlzaGVkICgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmdMb2dib29rTGlzdCA9IGZhbHNlCiAgICB9LAogICAgbG9hZERhdGEgKCkgewogICAgICB0aGlzLmlzTG9hZGluZ0xvZ2Jvb2tMaXN0ID0gdHJ1ZQogICAgICB0aGlzLmxvZ2Jvb2tMaXN0RXJyb3IgPSBudWxsCgogICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLmdldFF1ZXJ5QXNBUElTcGVjKCkKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ2Jvb2stbGlzdC9nZXRMb2dib29rTGlzdCcsIHBhcmFtcykKICAgICAgICAudGhlbih0aGlzLm9uTG9hZFN1Y2Nlc3MpCiAgICAgICAgLmNhdGNoKHRoaXMub25Mb2FkRXJyb3IpCiAgICAgICAgLmZpbmFsbHkodGhpcy5vbkxvYWRGaW5pc2hlZCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"table.vue","sourceRoot":"src/components/LogbookList","sourcesContent":["<template>\n  <div>\n    <TableFilter\n      class=\"mb-8\"\n      :filter=\"tableFilter\"\n      @change=\"onFilterChanged\"\n    />\n    <header class=\"mb-4 flex justify-between items-center\">\n      <p class=\"text-sm text-gray-600 dark:text-white\">\n        <template v-if=\"totalCount\">\n          Menampilkan {{ startIndex + 1 }} - {{ endIndex + 1 }} dari total {{ totalCount }} data\n        </template>\n      </p>\n      <p>\n        <button\n          v-if=\"isCheckinState\"\n          class=\"header-action-button bg-blue-500\"\n          @click=\"onCreateNewLogbook\">\n          + Buat Laporan Baru\n        </button>\n        <strong\n          v-else\n          class=\"p-2 my-0 rounded-md border border-solid border-orange-500 bg-orange-100\">\n          <span class=\"text-orange-700\">Silahkan Checkin untuk Buat Laporan</span>\n        </strong>\n      </p>\n    </header>\n    <div class=\"overflow-x-auto overflow-y-hidden\">\n      <table class=\"logbook-table text-gray-600 dark:text-white\">\n        <thead>\n          <tr>\n            <th style=\"width: 1%;\">No.</th>\n            <th style=\"width: 1%;\">Tanggal</th>\n            <th style=\"width: 1%;\">Project</th>\n            <th style=\"width: 50%;\">Task</th>\n            <th style=\"width: 1%;\">Tupoksi</th>\n            <th style=\"width: 1%;\">Foto Kegiatan</th>\n            <th style=\"width: 1%;\">Lampiran</th>\n            <th style=\"width: 1%;\">Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-if=\"isLoadingLogbookList\">\n            <tr v-for=\"i in mQuery.perPage\" :key=\"`skeleton:${i}`\">\n              <td v-for=\"j in 8\" :key=\"`col:${j}`\" class=\"p-4\">\n                <div class=\"w-full h-2 rounded-full bg-shimmering\" />\n              </td>\n            </tr>\n          </template>\n          <template v-else-if=\"!logbookListData || !logbookListData.length\">\n            <tr>\n              <td colspan=\"8\">\n                <div class=\"p-4 text-center font-bold text-gray-400 bg-gray-200 dark:bg-gray-800 uppercase\">\n                  Tidak ada data\n                </div>\n              </td>\n            </tr>\n          </template>\n          <template v-else>\n            <TableRow\n              v-for=\"(data, index) in logbookListData\"\n              :key=\"index\"\n              :logbook=\"data\"\n              :index=\"getAbsoluteIndex(index)\"\n              @delete:success=\"loadData\">\n            </TableRow>\n          </template>\n        </tbody>\n    </table>\n    </div>\n    <div class=\"v-pagination-container mt-4\">\n      <Pagination v-bind=\"pagination\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Pagination from '../Pagination'\nimport listMixin from './list-mixin'\nimport TableFilter from './table-filter'\nimport TableRow from './table-row'\nimport _isEqual from 'lodash/isEqual'\n\nexport default {\n  name: 'LogbookTable',\n  mixins: [listMixin],\n  components: {\n    Pagination,\n    TableFilter,\n    TableRow\n  },\n  props: {\n    query: {\n      type: Object,\n      default: () => null\n    }\n  },\n  data () {\n    return {\n      isLoadingLogbookList: true,\n      logbookListError: null,\n      logbookListData: null,\n      totalPage: 0,\n      totalCount: 0,\n\n      mQuery: {\n        page: 1,\n        perPage: 10,\n        startDate: null,\n        endDate: null\n      }\n    }\n  },\n  computed: {\n    tableFilter () {\n      return {\n        startDate: this.mQuery.startDate,\n        endDate: this.mQuery.endDate,\n        perPage: this.mQuery.perPage\n      }\n    },\n    isCheckinState () {\n      return this.$store.state['checkins-list'].isCheckin\n    },\n    startIndex () {\n      if (this.totalCount) {\n        return (this.mQuery.page - 1) * (this.mQuery.perPage)\n      }\n      return 0\n    },\n    endIndex () {\n      if (this.totalCount) {\n        if (this.mQuery.page === Math.ceil(this.totalCount / this.mQuery.perPage)) {\n          return this.totalCount - 1\n        } else {\n          return this.startIndex + this.logbookListData.length - 1\n        }\n      }\n      return 0\n    },\n    pagination () {\n      return {\n        value: this.mQuery.page,\n        pageCount: this.totalPage,\n        pageRange: 3,\n        clickHandler: this.onPageChanged,\n        firstLastButton: true\n      }\n    }\n  },\n  watch: {\n    query: {\n      immediate: true,\n      deep: true,\n      handler (newObject, oldObject) {\n        if (_isEqual(newObject, oldObject)) {\n          return\n        }\n\n        const {\n          page = 1,\n          perPage = 10,\n          startDate = null,\n          endDate = null\n        } = (newObject || {})\n        this.updateQuery({\n          page,\n          perPage,\n          startDate,\n          endDate\n        }, {\n          sync: false\n        })\n      }\n    }\n  },\n  methods: {\n    updateQuery ({\n      page,\n      perPage,\n      startDate,\n      endDate\n    }, {\n      sync = true\n    } = {}) {\n      this.mQuery = {\n        page,\n        perPage,\n        startDate,\n        endDate\n      }\n      if (sync) {\n        this.$emit('update:query', this.mQuery)\n      } else {\n        this.loadData()\n      }\n    },\n    getQueryAsAPISpec () {\n      const { page, perPage, startDate, endDate } = this.mQuery\n      return {\n        page,\n        pageSize: perPage,\n        start_date: startDate,\n        end_date: endDate\n      }\n    },\n    onFilterChanged ({ startDate, endDate, perPage } = {}) {\n      this.updateQuery({\n        page: 1,\n        startDate,\n        endDate,\n        perPage\n      })\n      this.totalCount = 0\n      this.totalPage = 0\n    },\n    onPageChanged (newPage) {\n      this.updateQuery({\n        ...this.mQuery,\n        page: newPage\n      })\n    },\n    onLoadSuccess ({ results, _meta }) {\n      const { totalPage, totalCount } = _meta\n      this.totalPage = totalPage\n      this.totalCount = totalCount\n      this.logbookListData = results\n    },\n    onLoadError (err) {\n      this.logbookListError = err\n    },\n    onLoadFinished () {\n      this.isLoadingLogbookList = false\n    },\n    loadData () {\n      this.isLoadingLogbookList = true\n      this.logbookListError = null\n\n      const params = this.getQueryAsAPISpec()\n      this.$store.dispatch('logbook-list/getLogbookList', params)\n        .then(this.onLoadSuccess)\n        .catch(this.onLoadError)\n        .finally(this.onLoadFinished)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.logbook-table {\n  @apply w-full text-sm select-text overflow-auto;\n\n  th {\n    vertical-align: top;\n    &:not([class*=\"px-0\"]) {\n      @apply px-4;\n    }\n    &:not([class*=\"py-0\"]) {\n      @apply py-2;\n    }\n  }\n\n  th {\n    @apply border-t-2 border-b-2\n    border-solid border-gray-300\n    text-left\n    text-xs\n    uppercase tracking-wider;\n  }\n}\n\n.header-action-button {\n  @apply h-8 mx-1 px-3 py-1 rounded text-white;\n\n  > *[class*=\"fa-\"] {\n    @apply mr-1;\n  }\n\n  &:hover,\n  &:focus {\n    @apply outline-none opacity-50;\n  }\n}\n</style>\n"]}]}