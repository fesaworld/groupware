{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/DayoffList/table.vue?vue&type=style&index=0&id=4a4bcd56&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/DayoffList/table.vue","mtime":1673491775261},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/css-loader/dist/cjs.js","mtime":1673491970692},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673491936529},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/postcss-loader/src/index.js","mtime":1673491966590},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/sass-loader/dist/cjs.js","mtime":1673491959555},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kYXlvZmYtdGFibGUgewogICZfX2V2aWRlbmNlIHsKICAgIEBhcHBseSB3LTI0IGgtMjQgb2JqZWN0LWNlbnRlciBvYmplY3QtY292ZXIKICAgIGJvcmRlciBib3JkZXItc29saWQgYm9yZGVyLWdyYXktMzAwCiAgICByb3VuZGVkLWxnIG92ZXJmbG93LWhpZGRlbjsKICB9Cn0KCi5kYXlvZmYtdGFibGVfX2J0bi1jcmVhdGUgewogIEBhcHBseSBiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlCiAgcHgtNCBweS0yIHctZnVsbCByb3VuZGVkOwp9Cg=="},{"version":3,"sources":["table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6JA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"table.vue","sourceRoot":"src/components/Attendance/DayoffList","sourcesContent":["<template>\n  <DataTable\n    description=\"Dayoff List\"\n    class=\"dark:text-white\"\n    :is-loading=\"isLoading\"\n    :data=\"tableData\"\n    :error=\"error\"\n    :columns=\"tableColumns\"\n    :pagination=\"tablePagination\"\n    @change:page=\"onPageChanged\">\n    <template #actions>\n      <div>\n        <button class=\"dayoff-table__btn-create\" @click=\"onGoToDayoffForm\">\n          Laporkan Izin\n        </button>\n      </div>\n    </template>\n    <template #column-permit_acknowledged=\"{ row, rowIndex }\">\n      <ul>\n        <li\n          v-for=\"(ack, index) in acknowledgementOptions\"\n          :key=\"index\">\n          <label :for=\"`row-${rowIndex}-permit_acknowledged`\">\n            <input\n              type=\"checkbox\"\n              :checked=\"isAcknowledgementChecked(row, ack)\"\n              class=\"pointer-events-none\">\n            {{ ack }}\n          </label>\n        </li>\n      </ul>\n    </template>\n    <template #column-file_url=\"{ row }\">\n      <img\n        alt=\"Dayoff Evidence\"\n        :src=\"row.file_url\"\n        class=\"dayoff-table__evidence\">\n    </template>\n  </DataTable>\n</template>\n\n<script>\nimport DataTable from '../../DataTable'\nimport { formatDateLong } from '../../../lib/date'\nimport { STAKEHOLDER } from '../../../lib/constants'\n\nconst acknowledgementOptions = Object.freeze([\n  STAKEHOLDER.STRUCTURAL,\n  STAKEHOLDER.HR,\n  STAKEHOLDER.COORDINATOR,\n  STAKEHOLDER.WORK_PARTNER\n])\n\nconst tableColumns = Object.freeze([\n  {\n    prop: 'permits_type',\n    label: 'Jenis Izin'\n  },\n  {\n    label: 'Dari',\n    get: ({ row }) => {\n      if (row.start_date) {\n        return formatDateLong(new Date(row.start_date))\n      }\n      return '-'\n    }\n  },\n  {\n    label: 'Sampai',\n    get: ({ row }) => {\n      if (row.end_date) {\n        return formatDateLong(new Date(row.end_date))\n      }\n      return '-'\n    }\n  },\n  {\n    prop: 'permit_acknowledged',\n    label: 'Sudah Memberitahu'\n  },\n  {\n    prop: 'note',\n    label: 'Keterangan'\n  },\n  {\n    prop: 'file_url',\n    label: 'Evidence'\n  }\n])\n\nexport default {\n  components: {\n    DataTable\n  },\n  data () {\n    return {\n      acknowledgementOptions,\n      tableColumns,\n      page: 1,\n      perPage: 10,\n      totalPages: 0,\n      totalCount: 0,\n      tableData: [],\n      isLoading: false,\n      error: null\n    }\n  },\n  computed: {\n    tablePagination () {\n      const { page, perPage, totalPages, totalCount } = this\n      return {\n        page,\n        perPage,\n        totalPages,\n        totalCount\n      }\n    }\n  },\n  mounted () {\n    this.loadData()\n  },\n  methods: {\n    onPageChanged (newPage) {\n      this.page = newPage\n      this.loadData()\n    },\n    async loadData () {\n      this.isLoading = true\n      await this.$store.dispatch('dayoff-list/getDayoffList', {\n        page: this.page,\n        perPage: this.perPage\n      })\n        .then(({ results, _meta: meta }) => {\n          this.tableData = results\n          this.page = meta.currentPage\n          this.perPage = meta.perPage\n          this.totalCount = meta.totalCount\n          this.totalPages = meta.totalPage\n        }).catch((e) => {\n          this.error = e\n        })\n      this.isLoading = false\n    },\n    isAcknowledgementChecked (row, acknowledgementType) {\n      const arr = row.permit_acknowledged\n      return Array.isArray(arr) && arr.includes(acknowledgementType)\n    },\n    onGoToDayoffForm () {\n      this.$router.push({\n        path: '/dayoff/create'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dayoff-table {\n  &__evidence {\n    @apply w-24 h-24 object-center object-cover\n    border border-solid border-gray-300\n    rounded-lg overflow-hidden;\n  }\n}\n\n.dayoff-table__btn-create {\n  @apply bg-blue-500 text-white\n  px-4 py-2 w-full rounded;\n}\n</style>\n"]}]}