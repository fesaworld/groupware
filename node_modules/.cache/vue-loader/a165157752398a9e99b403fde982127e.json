{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/DayoffList/table.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Attendance/DayoffList/table.vue","mtime":1673491775261},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXRhVGFibGUgZnJvbSAnLi4vLi4vRGF0YVRhYmxlJwppbXBvcnQgeyBmb3JtYXREYXRlTG9uZyB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYXRlJwppbXBvcnQgeyBTVEFLRUhPTERFUiB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb25zdGFudHMnCgpjb25zdCBhY2tub3dsZWRnZW1lbnRPcHRpb25zID0gT2JqZWN0LmZyZWV6ZShbCiAgU1RBS0VIT0xERVIuU1RSVUNUVVJBTCwKICBTVEFLRUhPTERFUi5IUiwKICBTVEFLRUhPTERFUi5DT09SRElOQVRPUiwKICBTVEFLRUhPTERFUi5XT1JLX1BBUlRORVIKXSkKCmNvbnN0IHRhYmxlQ29sdW1ucyA9IE9iamVjdC5mcmVlemUoWwogIHsKICAgIHByb3A6ICdwZXJtaXRzX3R5cGUnLAogICAgbGFiZWw6ICdKZW5pcyBJemluJwogIH0sCiAgewogICAgbGFiZWw6ICdEYXJpJywKICAgIGdldDogKHsgcm93IH0pID0+IHsKICAgICAgaWYgKHJvdy5zdGFydF9kYXRlKSB7CiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGVMb25nKG5ldyBEYXRlKHJvdy5zdGFydF9kYXRlKSkKICAgICAgfQogICAgICByZXR1cm4gJy0nCiAgICB9CiAgfSwKICB7CiAgICBsYWJlbDogJ1NhbXBhaScsCiAgICBnZXQ6ICh7IHJvdyB9KSA9PiB7CiAgICAgIGlmIChyb3cuZW5kX2RhdGUpIHsKICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZUxvbmcobmV3IERhdGUocm93LmVuZF9kYXRlKSkKICAgICAgfQogICAgICByZXR1cm4gJy0nCiAgICB9CiAgfSwKICB7CiAgICBwcm9wOiAncGVybWl0X2Fja25vd2xlZGdlZCcsCiAgICBsYWJlbDogJ1N1ZGFoIE1lbWJlcml0YWh1JwogIH0sCiAgewogICAgcHJvcDogJ25vdGUnLAogICAgbGFiZWw6ICdLZXRlcmFuZ2FuJwogIH0sCiAgewogICAgcHJvcDogJ2ZpbGVfdXJsJywKICAgIGxhYmVsOiAnRXZpZGVuY2UnCiAgfQpdKQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERhdGFUYWJsZQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBhY2tub3dsZWRnZW1lbnRPcHRpb25zLAogICAgICB0YWJsZUNvbHVtbnMsCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDEwLAogICAgICB0b3RhbFBhZ2VzOiAwLAogICAgICB0b3RhbENvdW50OiAwLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcjogbnVsbAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRhYmxlUGFnaW5hdGlvbiAoKSB7CiAgICAgIGNvbnN0IHsgcGFnZSwgcGVyUGFnZSwgdG90YWxQYWdlcywgdG90YWxDb3VudCB9ID0gdGhpcwogICAgICByZXR1cm4gewogICAgICAgIHBhZ2UsCiAgICAgICAgcGVyUGFnZSwKICAgICAgICB0b3RhbFBhZ2VzLAogICAgICAgIHRvdGFsQ291bnQKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLmxvYWREYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uUGFnZUNoYW5nZWQgKG5ld1BhZ2UpIHsKICAgICAgdGhpcy5wYWdlID0gbmV3UGFnZQogICAgICB0aGlzLmxvYWREYXRhKCkKICAgIH0sCiAgICBhc3luYyBsb2FkRGF0YSAoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZGF5b2ZmLWxpc3QvZ2V0RGF5b2ZmTGlzdCcsIHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgcGVyUGFnZTogdGhpcy5wZXJQYWdlCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgcmVzdWx0cywgX21ldGE6IG1ldGEgfSkgPT4gewogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXN1bHRzCiAgICAgICAgICB0aGlzLnBhZ2UgPSBtZXRhLmN1cnJlbnRQYWdlCiAgICAgICAgICB0aGlzLnBlclBhZ2UgPSBtZXRhLnBlclBhZ2UKICAgICAgICAgIHRoaXMudG90YWxDb3VudCA9IG1ldGEudG90YWxDb3VudAogICAgICAgICAgdGhpcy50b3RhbFBhZ2VzID0gbWV0YS50b3RhbFBhZ2UKICAgICAgICB9KS5jYXRjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5lcnJvciA9IGUKICAgICAgICB9KQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgaXNBY2tub3dsZWRnZW1lbnRDaGVja2VkIChyb3csIGFja25vd2xlZGdlbWVudFR5cGUpIHsKICAgICAgY29uc3QgYXJyID0gcm93LnBlcm1pdF9hY2tub3dsZWRnZWQKICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIuaW5jbHVkZXMoYWNrbm93bGVkZ2VtZW50VHlwZSkKICAgIH0sCiAgICBvbkdvVG9EYXlvZmZGb3JtICgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvZGF5b2ZmL2NyZWF0ZScKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"table.vue","sourceRoot":"src/components/Attendance/DayoffList","sourcesContent":["<template>\n  <DataTable\n    description=\"Dayoff List\"\n    class=\"dark:text-white\"\n    :is-loading=\"isLoading\"\n    :data=\"tableData\"\n    :error=\"error\"\n    :columns=\"tableColumns\"\n    :pagination=\"tablePagination\"\n    @change:page=\"onPageChanged\">\n    <template #actions>\n      <div>\n        <button class=\"dayoff-table__btn-create\" @click=\"onGoToDayoffForm\">\n          Laporkan Izin\n        </button>\n      </div>\n    </template>\n    <template #column-permit_acknowledged=\"{ row, rowIndex }\">\n      <ul>\n        <li\n          v-for=\"(ack, index) in acknowledgementOptions\"\n          :key=\"index\">\n          <label :for=\"`row-${rowIndex}-permit_acknowledged`\">\n            <input\n              type=\"checkbox\"\n              :checked=\"isAcknowledgementChecked(row, ack)\"\n              class=\"pointer-events-none\">\n            {{ ack }}\n          </label>\n        </li>\n      </ul>\n    </template>\n    <template #column-file_url=\"{ row }\">\n      <img\n        alt=\"Dayoff Evidence\"\n        :src=\"row.file_url\"\n        class=\"dayoff-table__evidence\">\n    </template>\n  </DataTable>\n</template>\n\n<script>\nimport DataTable from '../../DataTable'\nimport { formatDateLong } from '../../../lib/date'\nimport { STAKEHOLDER } from '../../../lib/constants'\n\nconst acknowledgementOptions = Object.freeze([\n  STAKEHOLDER.STRUCTURAL,\n  STAKEHOLDER.HR,\n  STAKEHOLDER.COORDINATOR,\n  STAKEHOLDER.WORK_PARTNER\n])\n\nconst tableColumns = Object.freeze([\n  {\n    prop: 'permits_type',\n    label: 'Jenis Izin'\n  },\n  {\n    label: 'Dari',\n    get: ({ row }) => {\n      if (row.start_date) {\n        return formatDateLong(new Date(row.start_date))\n      }\n      return '-'\n    }\n  },\n  {\n    label: 'Sampai',\n    get: ({ row }) => {\n      if (row.end_date) {\n        return formatDateLong(new Date(row.end_date))\n      }\n      return '-'\n    }\n  },\n  {\n    prop: 'permit_acknowledged',\n    label: 'Sudah Memberitahu'\n  },\n  {\n    prop: 'note',\n    label: 'Keterangan'\n  },\n  {\n    prop: 'file_url',\n    label: 'Evidence'\n  }\n])\n\nexport default {\n  components: {\n    DataTable\n  },\n  data () {\n    return {\n      acknowledgementOptions,\n      tableColumns,\n      page: 1,\n      perPage: 10,\n      totalPages: 0,\n      totalCount: 0,\n      tableData: [],\n      isLoading: false,\n      error: null\n    }\n  },\n  computed: {\n    tablePagination () {\n      const { page, perPage, totalPages, totalCount } = this\n      return {\n        page,\n        perPage,\n        totalPages,\n        totalCount\n      }\n    }\n  },\n  mounted () {\n    this.loadData()\n  },\n  methods: {\n    onPageChanged (newPage) {\n      this.page = newPage\n      this.loadData()\n    },\n    async loadData () {\n      this.isLoading = true\n      await this.$store.dispatch('dayoff-list/getDayoffList', {\n        page: this.page,\n        perPage: this.perPage\n      })\n        .then(({ results, _meta: meta }) => {\n          this.tableData = results\n          this.page = meta.currentPage\n          this.perPage = meta.perPage\n          this.totalCount = meta.totalCount\n          this.totalPages = meta.totalPage\n        }).catch((e) => {\n          this.error = e\n        })\n      this.isLoading = false\n    },\n    isAcknowledgementChecked (row, acknowledgementType) {\n      const arr = row.permit_acknowledged\n      return Array.isArray(arr) && arr.includes(acknowledgementType)\n    },\n    onGoToDayoffForm () {\n      this.$router.push({\n        path: '/dayoff/create'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dayoff-table {\n  &__evidence {\n    @apply w-24 h-24 object-center object-cover\n    border border-solid border-gray-300\n    rounded-lg overflow-hidden;\n  }\n}\n\n.dayoff-table__btn-create {\n  @apply bg-blue-500 text-white\n  px-4 py-2 w-full rounded;\n}\n</style>\n"]}]}