{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/FormLogbook/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/FormLogbook/index.vue","mtime":1673491775264},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGb3JtTG9nYm9va1NrZWxldG9uIGZyb20gJy4vU2tlbGV0b24nCmltcG9ydCBGb3JtSW5wdXREaWZmaWN1bHR5IGZyb20gJy4vSW5wdXREaWZmaWN1bHR5JwppbXBvcnQgRm9ybUlucHV0VHVwb2tzaSBmcm9tICcuL0lucHV0VHVwb2tzaScKaW1wb3J0IEZvcm1JbnB1dExpbmsgZnJvbSAnLi9JbnB1dExpbmsnCmltcG9ydCBGb3JtSW5wdXRQcm9qZWN0IGZyb20gJy4vSW5wdXRQcm9qZWN0QXV0b2NvbXBsZXRlJwppbXBvcnQgRm9ybUlucHV0IGZyb20gJy4uL0Zvcm0vSW5wdXQnCmltcG9ydCBGb3JtSW5wdXRFdmlkZW5jZSBmcm9tICcuLi9Gb3JtL0V2aWRlbmNlSW1hZ2VJbnB1dCcKaW1wb3J0IEZvcm1JbnB1dERhdGVUaW1lIGZyb20gJy4uL0Zvcm0vSW5wdXREYXRlVGltZScKaW1wb3J0IF9jbG9uZURlZXAgZnJvbSAnbG9kYXNoL2Nsb25lRGVlcCcKCmNvbnN0IG1vZGVsRGF0YSA9IHsKICAnZGF0ZVRhc2snOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIHRpbWVzdGFtcHR6ICcyMDIwLTA2LTExVDA2OjU1OjI0LjY5OFonCiAgJ3Byb2plY3RJZCc6IG51bGwsIC8vID8KICAncHJvamVjdE5hbWUnOiBudWxsLCAvLyA/CiAgJ25hbWVUYXNrJzogbnVsbCwgLy8gPwogICdkaWZmaWN1bHR5VGFzayc6ICcnLCAvLyBtdXN0IGJlIGVtcHR5IHN0cmluZyEKICAnb3JnYW5pemVyVGFzayc6IG51bGwsIC8vID8sCiAgJ2lzTWFpblRhc2snOiBudWxsLAogICdpc0RvY3VtZW50TGluayc6IHRydWUsCiAgJ3dvcmtQbGFjZSc6IG51bGwsCiAgJ3R1cG9rc2lKYWJhdGFuSWQnOiBudWxsCn0KCmNvbnN0IEFDVElPTiA9IHsKICBDUkVBVEU6ICdjcmVhdGUnLAogIEVESVQ6ICdlZGl0JywKICBWSUVXOiAndmlldycKfQoKY29uc3QgQUNUSU9OUyA9IFsKICBBQ1RJT04uQ1JFQVRFLAogIEFDVElPTi5FRElULAogIEFDVElPTi5WSUVXCl0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBGb3JtSW5wdXRUdXBva3NpLAogICAgRm9ybUlucHV0TGluaywKICAgIEZvcm1JbnB1dFByb2plY3QsCiAgICBGb3JtSW5wdXQsCiAgICBGb3JtSW5wdXRFdmlkZW5jZSwKICAgIEZvcm1JbnB1dERpZmZpY3VsdHksCiAgICBGb3JtSW5wdXREYXRlVGltZSwKICAgIEZvcm1Mb2dib29rU2tlbGV0b24KICB9LAogIHByb3BzOiB7CiAgICBhY3Rpb246IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHZhbGlkYXRvciAodikgewogICAgICAgIHJldHVybiBBQ1RJT05TLmluY2x1ZGVzKHYpCiAgICAgIH0KICAgIH0sCiAgICBpZDogewogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0KICAgIH0sCiAgICBvbkNhbmNlbENhbGxiYWNrOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhICgpIHsKICAgIGNvbnN0IHsKICAgICAgVlVFX0FQUF9BRE1JTl9XSEFUU0FQUF9OVU1CRVI6IGFkbWluV2hhdHNhcHBOdW1iZXIKICAgIH0gPSBwcm9jZXNzLmVudgogICAgY29uc3QgYWRtaW5XaGF0c2FwcEJhY2tsaW5rID0gYGh0dHBzOi8vYXBpLndoYXRzYXBwLmNvbS9zZW5kP3Bob25lPSR7YWRtaW5XaGF0c2FwcE51bWJlcn0mdGV4dD1Vc3VsYW4gbmFtYSBwcm9qZWN0L3Byb2R1Y3QgYW5kYWAKICAgIHJldHVybiB7CiAgICAgIGFkbWluV2hhdHNhcHBCYWNrbGluaywKICAgICAgaXNMb2FkaW5nTG9nYm9vazogZmFsc2UsCiAgICAgIG9yaWdpbmFsRGF0YTogbnVsbCwKICAgICAgcGF5bG9hZDogT2JqZWN0LmFzc2lnbih7fSwgbW9kZWxEYXRhKSwKICAgICAgZG9jdW1lbnRUYXNrTGluazogbnVsbCwKCiAgICAgIG1heERhdGVUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc1ZpZXdpbmdPbmx5ICgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uID09PSBBQ1RJT04uVklFVwogICAgfSwKICAgIGlzRWRpdGFibGUgKCkgewogICAgICByZXR1cm4gWwogICAgICAgIEFDVElPTi5DUkVBVEUsCiAgICAgICAgQUNUSU9OLkVESVQKICAgICAgXS5pbmNsdWRlcyh0aGlzLmFjdGlvbikKICAgIH0sCiAgICBwcm9qZWN0T3B0aW9ucyAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydvcmdhbml6YXRpb25zL2xpc3RPZlByb2plY3RzJ10KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBpZDogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGFzeW5jIGhhbmRsZXIgKGlkKSB7CiAgICAgICAgaWYgKCFpZCkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbnN0IGxvZ2Jvb2sgPSBhd2FpdCB0aGlzLmdldExvZ2Jvb2soaWQpCiAgICAgICAgaWYgKCFsb2dib29rKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdsb2dib29rOm5vdC1mb3VuZCcsIGlkKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbnN0IHsgZG9jdW1lbnRUYXNrVVJMIH0gPSBsb2dib29rCiAgICAgICAgdGhpcy5vcmlnaW5hbERhdGEgPSBfY2xvbmVEZWVwKGxvZ2Jvb2spCiAgICAgICAgdGhpcy5wYXlsb2FkID0gbG9nYm9vawogICAgICAgIHRoaXMub25Eb2N1bWVudFRhc2tMaW5rQ2hhbmdlZChkb2N1bWVudFRhc2tVUkwpCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldExvZ2Jvb2sgKGlkKSB7CiAgICAgIGxldCBsb2dib29rID0gbnVsbAogICAgICB0aGlzLmlzTG9hZGluZ0xvZ2Jvb2sgPSB0cnVlCiAgICAgIHRyeSB7CiAgICAgICAgbG9nYm9vayA9IGF3YWl0IHRoaXMuZ2V0TG9nYm9va0Zyb21WdWV4KGlkKQogICAgICAgIGlmICghbG9nYm9vaykgewogICAgICAgICAgbG9nYm9vayA9IGF3YWl0IHRoaXMuZ2V0TG9nYm9va0Zyb21EYXRhYmFzZShpZCkKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBsb2dib29rID0gbnVsbAogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuaXNMb2FkaW5nTG9nYm9vayA9IGZhbHNlCiAgICAgIH0KICAgICAgcmV0dXJuIGxvZ2Jvb2sKICAgIH0sCiAgICBnZXRMb2dib29rRnJvbVZ1ZXggKGlkKSB7CiAgICAgIGNvbnN0IGxvZ2Jvb2sgPSB0aGlzLiRzdG9yZS5zdGF0ZVsnbG9nYm9vay1saXN0J10ubG9nYm9va0luVmlldwogICAgICBpZiAobG9nYm9vayAmJiBsb2dib29rLl9pZCA9PT0gaWQpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGxvZ2Jvb2spCiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKQogICAgfSwKICAgIGFzeW5jIGdldExvZ2Jvb2tGcm9tRGF0YWJhc2UgKGlkKSB7CiAgICAgIGNvbnN0IGxvZ2Jvb2sgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9nYm9vay1saXN0L2dldExvZ2Jvb2tCeUlkJywgeyBpZCB9KQogICAgICBpZiAobG9nYm9vaykgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnbG9nYm9vay1saXN0L3NldExvZ2Jvb2tJblZpZXcnLCBsb2dib29rKQogICAgICB9CiAgICAgIHJldHVybiBsb2dib29rCiAgICB9LAogICAgcmVzZXRQYXlsb2FkICgpIHsKICAgICAgdGhpcy5wYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kZWxEYXRhKQogICAgfSwKICAgIG9uU2VsZWN0ZWRQcm9qZWN0Q2hhbmdlZCAob3B0KSB7CiAgICAgIGlmIChvcHQpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy5wYXlsb2FkLCAncHJvamVjdElkJywgb3B0LmlkKQogICAgICAgIHRoaXMuJHNldCh0aGlzLnBheWxvYWQsICdwcm9qZWN0TmFtZScsIG9wdC5uYW1lKQogICAgICB9CiAgICB9LAogICAgb25Eb2N1bWVudFRhc2tMaW5rQ2hhbmdlZCAobGluaykgewogICAgICB0aGlzLmRvY3VtZW50VGFza0xpbmsgPSBsaW5rCiAgICAgIGlmICh0eXBlb2YgbGluayAhPT0gJ3N0cmluZycgfHwgIWxpbmsubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5wYXlsb2FkLmlzRG9jdW1lbnRMaW5rID0gZmFsc2UKICAgICAgICB0aGlzLmRvY3VtZW50VGFza0xpbmsgPSBudWxsCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXlsb2FkLmlzRG9jdW1lbnRMaW5rID0gL15odHRwcz86XC9cLy8udGVzdChsaW5rKQogICAgICAgIHRoaXMuZG9jdW1lbnRUYXNrTGluayA9IGxpbmsKICAgICAgfQogICAgfSwKICAgIG9uQ2FuY2VsICgpIHsKICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2FuY2VsQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXR1cm4gdGhpcy5vbkNhbmNlbENhbGxiYWNrKCkKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5yZXNldFBheWxvYWQoKQogICAgfSwKICAgIGNyZWF0ZUZvcm1EYXRhVG9Qb3N0ICgpIHsKICAgICAgY29uc3QgewogICAgICAgIGV2aWRlbmNlVGFza1VSTCwKICAgICAgICBldmlkZW5jZVRhc2tQYXRoLAogICAgICAgIGRvY3VtZW50VGFza1VSTCwKICAgICAgICBkb2N1bWVudFRhc2tQYXRoLAogICAgICAgIGRpZmZpY3VsdHlUYXNrLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IHRoaXMucGF5bG9hZAoKICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2RpZmZpY3VsdHlUYXNrJywgZGlmZmljdWx0eVRhc2sgfHwgJycpCiAgICAgIE9iamVjdC5lbnRyaWVzKHJlc3QpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gewogICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHZhbHVlKQogICAgICB9KQoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBldmlkZW5jZUZpbGUgPSB0aGlzLiRyZWZzLmZvcm1JbnB1dEV2aWRlbmNlLmdldFNlbGVjdGVkRmlsZSgpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdldmlkZW5jZVRhc2snLCBldmlkZW5jZUZpbGUpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkb2N1bWVudFRhc2snLCB0aGlzLmRvY3VtZW50VGFza0xpbmsgfHwgJycpCiAgICAgICAgcmV0dXJuIGZvcm1EYXRhCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9LAogICAgYXN5bmMgcG9zdCAoKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gdGhpcy5jcmVhdGVGb3JtRGF0YVRvUG9zdCgpCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9nYm9vay1saXN0L2luc2VydExvZ2Jvb2snLCBmb3JtRGF0YSkKICAgIH0sCiAgICBjcmVhdGVGb3JtRGF0YVRvUHV0ICgpIHsKICAgICAgY29uc3QgewogICAgICAgIGV2aWRlbmNlVGFza1BhdGgsCiAgICAgICAgZXZpZGVuY2VUYXNrVVJMLAogICAgICAgIGRvY3VtZW50VGFza1BhdGgsCiAgICAgICAgZG9jdW1lbnRUYXNrVVJMLAogICAgICAgIGRpZmZpY3VsdHlUYXNrLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IHRoaXMucGF5bG9hZAoKICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2RpZmZpY3VsdHlUYXNrJywgZGlmZmljdWx0eVRhc2sgfHwgJycpCiAgICAgIE9iamVjdC5lbnRyaWVzKHJlc3QpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gewogICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHZhbHVlKQogICAgICB9KQoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBldmlkZW5jZUZpbGUgPSB0aGlzLiRyZWZzLmZvcm1JbnB1dEV2aWRlbmNlLmdldFNlbGVjdGVkRmlsZSgpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdldmlkZW5jZVRhc2snLCBldmlkZW5jZUZpbGUpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkb2N1bWVudFRhc2snLCB0aGlzLmRvY3VtZW50VGFza0xpbmsgfHwgJycpCiAgICAgICAgcmV0dXJuIGZvcm1EYXRhCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9LAogICAgYXN5bmMgcHV0ICgpIHsKICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmNyZWF0ZUZvcm1EYXRhVG9QdXQoKQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ2Jvb2stbGlzdC91cGRhdGVMb2dib29rJywgewogICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgIHBheWxvYWQ6IGZvcm1EYXRhCiAgICAgIH0pCiAgICB9LAogICAgb25TdWNjZXNzICh0aXRsZSwgbWVzc2FnZSkgewogICAgICByZXR1cm4gdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIHRleHQ6IG1lc3NhZ2UsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdUdXR1cCcKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kcm91dGVyLmJhY2soKQogICAgICB9KQogICAgfSwKICAgIG9uRXJyb3IgKG1zZykgewogICAgICByZXR1cm4gdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIHRpdGxlOiAnVGVyamFkaSBLZXNhbGFoYW4nLAogICAgICAgIHRleHQ6IG1zZyB8fCAnJywKICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1R1dHVwJwogICAgICB9KQogICAgfSwKICAgIGFzeW5jIHZhbGlkYXRlQWxsSW5wdXRGaWVsZHMgKCkgewogICAgICBjb25zdCBvYnNlcnZlciA9IHRoaXMuJHJlZnMudmFsaWRhdGlvbk9ic2VydmVyCiAgICAgIGlmICghb2JzZXJ2ZXIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbGlkYXRpb24gb2JzZXJ2ZXIgbm90IGZvdW5kJykKICAgICAgfQogICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgb2JzZXJ2ZXIudmFsaWRhdGUoKQogICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICAvLyBzY3JvbGwgdmlld3BvcnQgb250byBmaXJzdCBlcnJvciBmaWVsZAogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IGZpcnN0RXJyb3IgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1pbnB1dF9fZXJyb3ItaGludCcpCiAgICAgICAgICAgIGlmIChmaXJzdEVycm9yKSB7CiAgICAgICAgICAgICAgY29uc3QgeyB5IH0gPSBmaXJzdEVycm9yLnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oewogICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIGVycm9yIGZpZWxkLCB3aXRoIDY0cHggbWFyZ2luIHRvcAogICAgICAgICAgICAgICAgdG9wOiB3aW5kb3cuc2Nyb2xsWSArIHkgLSA2NCwKICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgLy8gc2lsZW50IGVycm9yCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgICByZXR1cm4gaXNWYWxpZAogICAgfSwKICAgIGFzeW5jIGJlZm9yZVNhdmUgKGhhbmRsZXIpIHsKICAgICAgY29uc3QgY2FuUHJvY2VlZCA9IGF3YWl0IHRoaXMudmFsaWRhdGVBbGxJbnB1dEZpZWxkcygpCiAgICAgIGlmICghY2FuUHJvY2VlZCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKQogICAgICB9CiAgICAgIGNvbnN0IHsgdmFsdWU6IGNvbmZpcm0gfSA9IGF3YWl0IHRoaXMuJHN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICdTaW1wYW4gZGF0YT8nLAogICAgICAgIHR5cGU6ICdxdWVzdGlvbicsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnVGlkYWsnLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnWWEsIHNpbXBhbicKICAgICAgfSkKCiAgICAgIGlmICghY29uZmlybSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLm9uU2F2ZSgpCiAgICB9LAogICAgYXN5bmMgb25TYXZlICgpIHsKICAgICAgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogJ0hhcmFwIHR1bmdndSBzZWJlbnRhci4uLicsCiAgICAgICAgb25CZWZvcmVPcGVuOiAoKSA9PiB0aGlzLiRzd2FsLnNob3dMb2FkaW5nKCkKICAgICAgfSkKCiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHRoaXMuYWN0aW9uID09PSBBQ1RJT04uQ1JFQVRFKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLiRwcm9taXNlTWluRGVsYXkodGhpcy5wb3N0KCksIDEwMDApCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGlvbiA9PT0gQUNUSU9OLkVESVQpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuJHByb21pc2VNaW5EZWxheSh0aGlzLnB1dCgpLCAxMDAwKQogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5vblN1Y2Nlc3MoJ0Jlcmhhc2lsIG1lbnlpbXBhbiBkYXRhJykKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiB0aGlzLm9uRXJyb3IoJ0dhZ2FsIG1lbnlpbXBhbiBkYXRhJykKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/FormLogbook","sourcesContent":["<template>\n  <div>\n    <FormLogbookSkeleton v-if=\"isLoadingLogbook\" />\n    <ValidationObserver v-if=\"!isLoadingLogbook\" ref=\"validationObserver\">\n      <FormInputProject\n        name=\"projectId\"\n        title=\"Nama Project\"\n        type=\"text\"\n        :disabled=\"!isEditable\"\n        rules=\"required\"\n        :custom-messages=\"{\n          required: 'Nama project harus diisi'\n        }\"\n        :value=\"payload.projectName\"\n        @change=\"onSelectedProjectChanged\"\n      >\n        <template\n          v-if=\"!isViewingOnly\"\n          #subtitle\n        >\n          <p>\n            <i aria-hidden=\"true\" class=\"text-gray-600 dark:text-gray-300\">\n              Nama project Anda tidak ada? Kontak admin via\n            </i>\n            <a\n              class=\"cursor-pointer hover:underline\"\n              :href=\"adminWhatsappBacklink\"\n              target=\"_blank\"\n            >\n              <strong class=\"text-green-500\">Whatsapp</strong>\n            </a>\n          </p>\n        </template>\n      </FormInputProject>\n      <br />\n      <FormInput\n        name=\"nameTask\"\n        title=\"Nama Task\"\n        type=\"text\"\n        :disabled=\"!isEditable\"\n        rules=\"required\"\n        :custom-messages=\"{\n          required: 'Nama task harus diisi'\n        }\"\n        v-model=\"payload.nameTask\"\n      />\n      <br />\n      <FormInputTupoksi\n        name=\"tupoksiJabatanId\"\n        :show-as-readonly-input=\"isViewingOnly\"\n        v-model=\"payload.tupoksiJabatanId\" />\n      <br />\n      <FormInputDateTime\n        name=\"dateTask\"\n        title=\"Tanggal Pengerjaan\"\n        type=\"date\"\n        :disabled=\"!isEditable\"\n        :max-datetime=\"maxDateTime\"\n        rules=\"required\"\n        :custom-messages=\"{\n          required: 'Tanggal pengerjaan harus diisi'\n        }\"\n        v-model=\"payload.dateTask\"\n      />\n      <br />\n      <FormInputDifficulty\n        name=\"difficultyTask\"\n        v-model=\"payload.difficultyTask\"\n      />\n      <br />\n      <FormInputEvidence\n        ref=\"formInputEvidence\"\n        name=\"evidenceTask\"\n        title=\"Foto Hasil Kerja/Foto Kegiatan*\"\n        :url.sync=\"payload.evidenceTaskURL\"\n        :path=\"payload.evidenceTaskPath\"\n        :disabled=\"!isEditable\"\n        rules=\"required|mimes:image/*|size:5120\"\n        accept=\"image/*\"\n        :custom-messages=\"{\n          required: 'Foto harus diisi',\n          mimes: 'File harus berupa gambar',\n          size: 'Gambar tidak boleh lebih dari 5MB'\n        }\"\n      >\n        <template\n          v-if=\"!isViewingOnly\"\n          #subtitle>\n          <span class=\"text-gray-700 dark:text-gray-400\">\n            File tidak boleh lebih dari 5MB\n          </span>\n        </template>\n      </FormInputEvidence>\n      <br />\n      <FormInputLink\n        ref=\"formInputDocumentLink\"\n        :show-as-readonly-link=\"!isEditable\"\n        :tupoksi-id=\"payload.tupoksiJabatanId\"\n        :value=\"documentTaskLink\"\n        @change=\"onDocumentTaskLinkChanged\"\n      />\n      <br />\n      <FormInput\n        name=\"workPlace\"\n        title=\"Tempat Pengerjaan\"\n        type=\"text\"\n        placeholder=\"Tempat pengerjaan\"\n        :disabled=\"!isEditable\"\n        rules=\"required\"\n        :custom-messages=\"{\n          required: 'Tempat pengerjaan harus diisi'\n        }\"\n        v-model=\"payload.workPlace\"\n      />\n      <br />\n      <FormInput\n        type=\"text\"\n        name=\"organizerTask\"\n        title=\"Penyelenggara\"\n        :disabled=\"!isEditable\"\n        rules=\"required\"\n        :custom-messages=\"{\n          required: 'Penyelenggara harus diisi'\n        }\"\n        v-model=\"payload.organizerTask\"\n      />\n      <br />\n      <div\n        v-if=\"isEditable\"\n        class=\"flex justify-end\"\n      >\n        <button\n          class=\"mr-4 button focus:outline-none\n                 bg-gray-200 hover:bg-gray-300 text-gray-500\"\n          @click=\"onCancel\"\n        >\n          Cancel\n        </button>\n        <button\n          class=\"button focus:outline-none\n                 bg-brand-blue hover:bg-brand-blue-lighter text-white\"\n          @click=\"beforeSave\"\n        >\n          Save\n        </button>\n      </div>\n    </ValidationObserver>\n  </div>\n</template>\n\n<script>\nimport FormLogbookSkeleton from './Skeleton'\nimport FormInputDifficulty from './InputDifficulty'\nimport FormInputTupoksi from './InputTupoksi'\nimport FormInputLink from './InputLink'\nimport FormInputProject from './InputProjectAutocomplete'\nimport FormInput from '../Form/Input'\nimport FormInputEvidence from '../Form/EvidenceImageInput'\nimport FormInputDateTime from '../Form/InputDateTime'\nimport _cloneDeep from 'lodash/cloneDeep'\n\nconst modelData = {\n  'dateTask': new Date().toISOString(), // timestamptz '2020-06-11T06:55:24.698Z'\n  'projectId': null, // ?\n  'projectName': null, // ?\n  'nameTask': null, // ?\n  'difficultyTask': '', // must be empty string!\n  'organizerTask': null, // ?,\n  'isMainTask': null,\n  'isDocumentLink': true,\n  'workPlace': null,\n  'tupoksiJabatanId': null\n}\n\nconst ACTION = {\n  CREATE: 'create',\n  EDIT: 'edit',\n  VIEW: 'view'\n}\n\nconst ACTIONS = [\n  ACTION.CREATE,\n  ACTION.EDIT,\n  ACTION.VIEW\n]\n\nexport default {\n  components: {\n    FormInputTupoksi,\n    FormInputLink,\n    FormInputProject,\n    FormInput,\n    FormInputEvidence,\n    FormInputDifficulty,\n    FormInputDateTime,\n    FormLogbookSkeleton\n  },\n  props: {\n    action: {\n      required: true,\n      validator (v) {\n        return ACTIONS.includes(v)\n      }\n    },\n    id: {\n      required: false,\n      type: [String, Number]\n    },\n    onCancelCallback: {\n      type: Function,\n      default: null\n    }\n  },\n  data () {\n    const {\n      VUE_APP_ADMIN_WHATSAPP_NUMBER: adminWhatsappNumber\n    } = process.env\n    const adminWhatsappBacklink = `https://api.whatsapp.com/send?phone=${adminWhatsappNumber}&text=Usulan nama project/product anda`\n    return {\n      adminWhatsappBacklink,\n      isLoadingLogbook: false,\n      originalData: null,\n      payload: Object.assign({}, modelData),\n      documentTaskLink: null,\n\n      maxDateTime: new Date().toISOString()\n    }\n  },\n  computed: {\n    isViewingOnly () {\n      return this.action === ACTION.VIEW\n    },\n    isEditable () {\n      return [\n        ACTION.CREATE,\n        ACTION.EDIT\n      ].includes(this.action)\n    },\n    projectOptions () {\n      return this.$store.getters['organizations/listOfProjects']\n    }\n  },\n  watch: {\n    id: {\n      immediate: true,\n      async handler (id) {\n        if (!id) {\n          return\n        }\n        const logbook = await this.getLogbook(id)\n        if (!logbook) {\n          this.$emit('logbook:not-found', id)\n          return\n        }\n        const { documentTaskURL } = logbook\n        this.originalData = _cloneDeep(logbook)\n        this.payload = logbook\n        this.onDocumentTaskLinkChanged(documentTaskURL)\n      }\n    }\n  },\n  methods: {\n    async getLogbook (id) {\n      let logbook = null\n      this.isLoadingLogbook = true\n      try {\n        logbook = await this.getLogbookFromVuex(id)\n        if (!logbook) {\n          logbook = await this.getLogbookFromDatabase(id)\n        }\n      } catch (e) {\n        logbook = null\n      } finally {\n        this.isLoadingLogbook = false\n      }\n      return logbook\n    },\n    getLogbookFromVuex (id) {\n      const logbook = this.$store.state['logbook-list'].logbookInView\n      if (logbook && logbook._id === id) {\n        return Promise.resolve(logbook)\n      }\n      return Promise.resolve(null)\n    },\n    async getLogbookFromDatabase (id) {\n      const logbook = await this.$store.dispatch('logbook-list/getLogbookById', { id })\n      if (logbook) {\n        this.$store.commit('logbook-list/setLogbookInView', logbook)\n      }\n      return logbook\n    },\n    resetPayload () {\n      this.payload = Object.assign({}, modelData)\n    },\n    onSelectedProjectChanged (opt) {\n      if (opt) {\n        this.$set(this.payload, 'projectId', opt.id)\n        this.$set(this.payload, 'projectName', opt.name)\n      }\n    },\n    onDocumentTaskLinkChanged (link) {\n      this.documentTaskLink = link\n      if (typeof link !== 'string' || !link.length) {\n        this.payload.isDocumentLink = false\n        this.documentTaskLink = null\n      } else {\n        this.payload.isDocumentLink = /^https?:\\/\\//.test(link)\n        this.documentTaskLink = link\n      }\n    },\n    onCancel () {\n      if (typeof this.onCancelCallback === 'function') {\n        return this.onCancelCallback()\n      }\n      return this.resetPayload()\n    },\n    createFormDataToPost () {\n      const {\n        evidenceTaskURL,\n        evidenceTaskPath,\n        documentTaskURL,\n        documentTaskPath,\n        difficultyTask,\n        ...rest\n      } = this.payload\n\n      const formData = new FormData()\n      formData.append('difficultyTask', difficultyTask || '')\n      Object.entries(rest).forEach(([key, value]) => {\n        formData.append(key, value)\n      })\n\n      try {\n        const evidenceFile = this.$refs.formInputEvidence.getSelectedFile()\n        formData.append('evidenceTask', evidenceFile)\n        formData.append('documentTask', this.documentTaskLink || '')\n        return formData\n      } catch (e) {\n        return null\n      }\n    },\n    async post () {\n      const formData = this.createFormDataToPost()\n      return this.$store.dispatch('logbook-list/insertLogbook', formData)\n    },\n    createFormDataToPut () {\n      const {\n        evidenceTaskPath,\n        evidenceTaskURL,\n        documentTaskPath,\n        documentTaskURL,\n        difficultyTask,\n        ...rest\n      } = this.payload\n\n      const formData = new FormData()\n      formData.append('difficultyTask', difficultyTask || '')\n      Object.entries(rest).forEach(([key, value]) => {\n        formData.append(key, value)\n      })\n\n      try {\n        const evidenceFile = this.$refs.formInputEvidence.getSelectedFile()\n        formData.append('evidenceTask', evidenceFile)\n        formData.append('documentTask', this.documentTaskLink || '')\n        return formData\n      } catch (e) {\n        return null\n      }\n    },\n    async put () {\n      const formData = this.createFormDataToPut()\n      return this.$store.dispatch('logbook-list/updateLogbook', {\n        id: this.id,\n        payload: formData\n      })\n    },\n    onSuccess (title, message) {\n      return this.$swal.fire({\n        type: 'success',\n        title: title,\n        text: message,\n        showCancelButton: false,\n        confirmButtonText: 'Tutup'\n      }).then(() => {\n        this.$router.back()\n      })\n    },\n    onError (msg) {\n      return this.$swal.fire({\n        type: 'error',\n        title: 'Terjadi Kesalahan',\n        text: msg || '',\n        showCancelButton: false,\n        confirmButtonText: 'Tutup'\n      })\n    },\n    async validateAllInputFields () {\n      const observer = this.$refs.validationObserver\n      if (!observer) {\n        throw new Error('validation observer not found')\n      }\n      const isValid = await observer.validate()\n      if (!isValid) {\n        // scroll viewport onto first error field\n        this.$nextTick(() => {\n          try {\n            const firstError = this.$el.querySelector('.form-input__error-hint')\n            if (firstError) {\n              const { y } = firstError.parentElement.getBoundingClientRect()\n              window.scrollTo({\n                // scroll to error field, with 64px margin top\n                top: window.scrollY + y - 64,\n                behavior: 'smooth'\n              })\n            }\n          } catch (e) {\n            // silent error\n          }\n        })\n      }\n      return isValid\n    },\n    async beforeSave (handler) {\n      const canProceed = await this.validateAllInputFields()\n      if (!canProceed) {\n        return Promise.resolve()\n      }\n      const { value: confirm } = await this.$swal.fire({\n        title: 'Simpan data?',\n        type: 'question',\n        showCancelButton: true,\n        cancelButtonText: 'Tidak',\n        showConfirmButton: true,\n        confirmButtonText: 'Ya, simpan'\n      })\n\n      if (!confirm) {\n        return Promise.resolve()\n      }\n      return this.onSave()\n    },\n    async onSave () {\n      this.$swal.fire({\n        title: 'Harap tunggu sebentar...',\n        onBeforeOpen: () => this.$swal.showLoading()\n      })\n\n      try {\n        if (this.action === ACTION.CREATE) {\n          await this.$promiseMinDelay(this.post(), 1000)\n        } else if (this.action === ACTION.EDIT) {\n          await this.$promiseMinDelay(this.put(), 1000)\n        }\n        return this.onSuccess('Berhasil menyimpan data')\n      } catch (e) {\n        return this.onError('Gagal menyimpan data')\n      }\n    }\n  }\n}\n</script>\n"]}]}