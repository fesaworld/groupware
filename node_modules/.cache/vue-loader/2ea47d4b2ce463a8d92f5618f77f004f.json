{"remainingRequest":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Profile/Edit/DataCompletionStatus.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/src/components/Profile/Edit/DataCompletionStatus.vue","mtime":1673491775266},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/babel-loader/lib/index.js","mtime":1673491971758},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/cache-loader/dist/cjs.js","mtime":1673491971474},{"path":"/Users/jds/Documents/diskominfo/jds/digiteam/groupware/node_modules/vue-loader/lib/index.js","mtime":1673491936504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfZ2V0IGZyb20gJ2xvZGFzaC9nZXQnCmltcG9ydCBfZmxvb3IgZnJvbSAnbG9kYXNoL2Zsb29yJwppbXBvcnQgeyBQUk9GSUxFX0RBVEFfU0NIRU1BIH0gZnJvbSAnLi91dGlscycKCmNvbnN0IFNDSEVNQV9FTlRSSUVTID0gT2JqZWN0LmVudHJpZXMoUFJPRklMRV9EQVRBX1NDSEVNQSkKY29uc3QgQUxMX0ZJRUxEU19DT1VOVCA9IFNDSEVNQV9FTlRSSUVTLnJlZHVjZSgoc3VtLCBbZGF0YXR5cGUsIGZpZWxkc10pID0+IHsKICBzdW0gPSBzdW0gKyBmaWVsZHMubGVuZ3RoCiAgcmV0dXJuIHN1bQp9LCAwKQoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnLAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIFsncmVkaXJlY3QnLCAnZGVmYXVsdCddLmluY2x1ZGVzKHYpCiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1N0YXR1czogZmFsc2UsCiAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiAwCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuJHdhdGNoKAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlWydwcm9maWxlLWRldGFpbCddLml0ZW0KICAgICAgfSwKICAgICAgZnVuY3Rpb24gKG9iaikgewogICAgICAgIGlmIChvYmopIHsKICAgICAgICAgIHRoaXMucHJvY2Vzc0RhdGEob2JqKQogICAgICAgICAgICAudGhlbigoeyBmaWxsZWQsIHVuZmlsbGVkLCBwZXJjZW50YWdlIH0pID0+IHsKICAgICAgICAgICAgICB0aGlzLnNob3dTdGF0dXMgPSBwZXJjZW50YWdlIDwgMTAwCiAgICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2UKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsgaW1tZWRpYXRlOiB0cnVlLCBkZWVwOiBmYWxzZSB9CiAgICApCiAgfSwKICBjb21wdXRlZDogewogICAgdXNlciAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVsncHJvZmlsZS1kZXRhaWwnXS5pdGVtIHx8IG51bGwKICAgIH0sCiAgICBwcm9ncmVzc0JhclN0eWxlICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAnLS1wcm9maWxlLWNvbXBsZXRpb24nOiBgJHt0aGlzLmNvbXBsZXRpb25QZXJjZW50YWdlfSVgCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHByb2Nlc3NEYXRhIChleGlzdGluZ0RhdGEpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIGlmIChleGlzdGluZ0RhdGEpIHsKICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IFNDSEVNQV9FTlRSSUVTLnJlZHVjZSgoW2ZpbGxlZCwgdW5maWxsZWRdLCBbZGF0YXR5cGUsIHByb3BlcnRpZXNdKSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IHByb3Agb2YgcHJvcGVydGllcykgewogICAgICAgICAgICAgIGNvbnN0IG5zID0gYCR7ZGF0YXR5cGV9LiR7cHJvcH1gCiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdWYWwgPSBfZ2V0KGV4aXN0aW5nRGF0YSwgbnMpCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZ1ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHwgZXhpc3RpbmdWYWwgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHVuZmlsbGVkLnB1c2gobnMpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZpbGxlZC5wdXNoKG5zKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gW2ZpbGxlZCwgdW5maWxsZWRdCiAgICAgICAgICB9LCBbW10sIFtdXSkKCiAgICAgICAgICBjb25zdCBbZmlsbGVkLCB1bmZpbGxlZF0gPSBmaWVsZHMKICAgICAgICAgIGNvbnN0IHJhdGlvID0gZmlsbGVkLmxlbmd0aCAvIEFMTF9GSUVMRFNfQ09VTlQKICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBfZmxvb3IocmF0aW8gKiAxMDAsIDApCiAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgZmlsbGVkLAogICAgICAgICAgICB1bmZpbGxlZCwKICAgICAgICAgICAgcGVyY2VudGFnZQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["DataCompletionStatus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataCompletionStatus.vue","sourceRoot":"src/components/Profile/Edit","sourcesContent":["<template>\n  <div v-show=\"completionPercentage < 100\">\n    <transition enter-active-class=\"slide-y-fade-transition-enter-active\"\n                enter-class=\"slide-y-fade-transition-enter\">\n      <div  v-if=\"user && showStatus\"\n            class=\"px-4 py-8 sm:p-8\">\n        <h3 class=\"relative text-xl pr-12\">\n          Hai, <strong>{{user.name}}</strong>!\n          <button class=\"appearance-none absolute right-0\"\n                  @click.capture=\"showStatus = false\">\n            <i aria-hidden=\"true\" class=\"fas fa-times fa-lg text-gray-600 hover:text-red-400\"></i>\n          </button>\n        </h3>\n        <template v-if=\"completionPercentage >= 100\">\n          <p></p>\n        </template>\n        <template v-else-if=\"completionPercentage < 100\">\n          <div>\n            <p class=\"text-lg text-gray-700 pr-12\">\n              Kelihatannya data kamu belum lengkap.<br class=\"hidden sm:block\">\n              Ayo lengkapi data kamu di\n              <router-link  v-if=\"mode === 'redirect'\"\n                            to=\"/profile/edit/personal\"\n                            class=\"font-bold text-brand-blue hover:text-blue-900 hover:underline\">sini</router-link>\n              <span v-else>sini</span>\n              &nbsp;&nbsp;<i aria-hidden=\"true\" class=\"far fa-smile\"></i>\n            </p>\n            <br>\n            <figcaption class=\"max-w-sm\">\n              <caption class=\"block text-left italic text-gray-600\">\n                Seberapa lengkap data kamu?\n              </caption>\n              <div class=\"w-full flex flex-row items-center\">\n                <i  aria-hidden=\"true\"\n                    role=\"progress bar\"\n                    class=\"progress-bar flex-1\"\n                    :style=\"progressBarStyle\">\n                </i>\n                <label class=\"progress-bar-label\">\n                  {{completionPercentage ? `${completionPercentage}%` : ''}}\n                </label>\n              </div>\n            </figcaption>\n          </div>\n        </template>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport _get from 'lodash/get'\nimport _floor from 'lodash/floor'\nimport { PROFILE_DATA_SCHEMA } from './utils'\n\nconst SCHEMA_ENTRIES = Object.entries(PROFILE_DATA_SCHEMA)\nconst ALL_FIELDS_COUNT = SCHEMA_ENTRIES.reduce((sum, [datatype, fields]) => {\n  sum = sum + fields.length\n  return sum\n}, 0)\n\nexport default {\n  props: {\n    mode: {\n      type: String,\n      default: 'default',\n      validator: function (v) {\n        return ['redirect', 'default'].includes(v)\n      }\n    }\n  },\n  data () {\n    return {\n      showStatus: false,\n      completionPercentage: 0\n    }\n  },\n  mounted () {\n    this.$watch(\n      function () {\n        return this.$store.state['profile-detail'].item\n      },\n      function (obj) {\n        if (obj) {\n          this.processData(obj)\n            .then(({ filled, unfilled, percentage }) => {\n              this.showStatus = percentage < 100\n              this.completionPercentage = percentage\n            })\n        }\n      },\n      { immediate: true, deep: false }\n    )\n  },\n  computed: {\n    user () {\n      return this.$store.state['profile-detail'].item || null\n    },\n    progressBarStyle () {\n      return {\n        '--profile-completion': `${this.completionPercentage}%`\n      }\n    }\n  },\n  methods: {\n    processData (existingData) {\n      return new Promise(resolve => {\n        if (existingData) {\n          const fields = SCHEMA_ENTRIES.reduce(([filled, unfilled], [datatype, properties]) => {\n            for (let prop of properties) {\n              const ns = `${datatype}.${prop}`\n              const existingVal = _get(existingData, ns)\n              if (typeof existingVal === 'undefined' || existingVal === null) {\n                unfilled.push(ns)\n              } else {\n                filled.push(ns)\n              }\n            }\n            return [filled, unfilled]\n          }, [[], []])\n\n          const [filled, unfilled] = fields\n          const ratio = filled.length / ALL_FIELDS_COUNT\n          const percentage = _floor(ratio * 100, 0)\n          resolve({\n            filled,\n            unfilled,\n            percentage\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.progress-bar {\n  @apply relative block flex justify-start items-center w-full h-2 rounded-full bg-gray-400 shadow;\n\n  &::before {\n    content: '';\n    @supports (clip-path: inset(0 0 0 0)) {\n      width: 100%;\n      clip-path: inset(0px calc(100% - var(--profile-completion, 100%)) 0px 0px);\n    }\n    @supports not (clip-path: inset(0 0 0 0)) {\n      width: var(--profile-completion, 100%);\n    }\n    background-color: #00c853;\n    background-image: linear-gradient(to right, #00b0ff 0%, #00c853);\n    @apply absolute top-0 left-0 bottom-0 inline-block rounded-full;\n  }\n}\n\n.progress-bar-label {\n  font-style: normal;\n  @apply inline-block ml-4 text-gray-700 text-base font-bold leading-none;\n}\n</style>\n"]}]}